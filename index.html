<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>1WIN SIGNALS</title>
    
    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%2300A8FF'/><text x='50' y='68' font-family='Arial' font-size='60' font-weight='bold' fill='white' text-anchor='middle'>1</text></svg>">
    
    <!-- Meta -->
    <meta name="theme-color" content="#00A8FF">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- ВСТРОЕННЫЙ CSS СТИЛЬ -->
    <style>
        /* ===== СБРОС И БАЗОВЫЕ СТИЛИ ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Poppins', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #00A8FF 0%, #0066CC 100%);
            --secondary-gradient: linear-gradient(135deg, #0A1E3A 0%, #1A2F5A 100%);
            --dark-bg: #0A1429;
            --card-bg: rgba(10, 30, 58, 0.95);
            --text-primary: #FFFFFF;
            --text-secondary: #A0B4D6;
            --accent-blue: #00A8FF;
            --accent-blue-dark: #0066CC;
            --accent-pink: #FF3366;
            --accent-green: #00FF88;
            --accent-gold: #FFD700;
            --accent-purple: #9D4EDD;
            --accent-cyan: #00E5FF;
        }

        body {
            background: linear-gradient(135deg, var(--dark-bg) 0%, #0A1E3A 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            font-family: 'Poppins', sans-serif;
            padding-bottom: 120px;
        }

        /* УЛУЧШЕННЫЙ ФОНОВЫЙ ТЕКСТ 1WIN С ПЛАВАЮЩЕЙ АНИМАЦИЕЙ */
        .floating-background {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
        }

        .floating-text {
            position: absolute;
            font-size: 60px;
            font-weight: 900;
            color: rgba(0, 168, 255, 0.08);
            text-shadow: 0 0 30px rgba(0, 168, 255, 0.3);
            opacity: 0.4;
            animation: floatText 25s infinite linear;
            font-family: 'Poppins', sans-serif;
            white-space: nowrap;
        }

        .floating-text:nth-child(1) { top: 10%; left: 5%; animation-delay: 0s; animation-duration: 30s; }
        .floating-text:nth-child(2) { top: 20%; left: 15%; animation-delay: 2s; animation-duration: 35s; }
        .floating-text:nth-child(3) { top: 30%; left: 25%; animation-delay: 4s; animation-duration: 25s; }
        .floating-text:nth-child(4) { top: 40%; left: 35%; animation-delay: 6s; animation-duration: 40s; }
        .floating-text:nth-child(5) { top: 50%; left: 45%; animation-delay: 8s; animation-duration: 28s; }
        .floating-text:nth-child(6) { top: 60%; left: 55%; animation-delay: 10s; animation-duration: 32s; }
        .floating-text:nth-child(7) { top: 70%; left: 65%; animation-delay: 12s; animation-duration: 38s; }
        .floating-text:nth-child(8) { top: 80%; left: 75%; animation-delay: 14s; animation-duration: 27s; }
        .floating-text:nth-child(9) { top: 15%; left: 85%; animation-delay: 16s; animation-duration: 33s; }
        .floating-text:nth-child(10) { top: 25%; left: 95%; animation-delay: 18s; animation-duration: 29s; }
        .floating-text:nth-child(11) { top: 35%; left: 105%; animation-delay: 20s; animation-duration: 31s; }
        .floating-text:nth-child(12) { top: 45%; left: 115%; animation-delay: 22s; animation-duration: 26s; }
        .floating-text:nth-child(13) { top: 55%; left: 125%; animation-delay: 24s; animation-duration: 34s; }
        .floating-text:nth-child(14) { top: 65%; left: 135%; animation-delay: 26s; animation-duration: 37s; }
        .floating-text:nth-child(15) { top: 75%; left: 145%; animation-delay: 28s; animation-duration: 24s; }
        .floating-text:nth-child(16) { top: 85%; left: 155%; animation-delay: 30s; animation-duration: 36s; }

        @keyframes floatText {
            0% {
                transform: translateX(0) translateY(0) rotate(0deg);
                opacity: 0.4;
            }
            25% {
                transform: translateX(-50px) translateY(20px) rotate(5deg);
                opacity: 0.6;
            }
            50% {
                transform: translateX(-100px) translateY(-15px) rotate(-5deg);
                opacity: 0.3;
            }
            75% {
                transform: translateX(-150px) translateY(10px) rotate(3deg);
                opacity: 0.5;
            }
            100% {
                transform: translateX(-200px) translateY(0) rotate(0deg);
                opacity: 0.4;
            }
        }

        /* 3D Particle Background */
        .particles-3d {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: var(--accent-blue);
            border-radius: 50%;
            animation: floatParticle 20s infinite linear;
            box-shadow: 0 0 15px var(--accent-blue);
        }

        .particle:nth-child(2n) {
            background: var(--accent-blue-dark);
            box-shadow: 0 0 15px var(--accent-blue-dark);
            animation-duration: 25s;
        }

        .particle:nth-child(3n) {
            background: var(--accent-cyan);
            box-shadow: 0 0 15px var(--accent-cyan);
            animation-duration: 30s;
        }

        @keyframes floatParticle {
            0% {
                transform: translate3d(0, 0, 0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translate3d(100vw, 100vh, 100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* 3D Text Effects */
        .text-3d {
            text-shadow: 
                0 1px 0 rgba(0, 168, 255, 0.3),
                0 2px 0 rgba(0, 168, 255, 0.25),
                0 3px 0 rgba(0, 168, 255, 0.2),
                0 4px 0 rgba(0, 168, 255, 0.15),
                0 5px 0 rgba(0, 168, 255, 0.1);
        }

        .text-glow {
            animation: textGlow 2s ease-in-out infinite alternate;
        }

        @keyframes textGlow {
            from {
                text-shadow: 0 0 10px var(--accent-blue), 0 0 20px var(--accent-blue);
            }
            to {
                text-shadow: 0 0 20px var(--accent-blue), 0 0 30px var(--accent-blue);
            }
        }

        #app {
            max-width: 500px;
            margin: 0 auto;
            position: relative;
            min-height: 100vh;
            background: rgba(10, 20, 41, 0.98);
            box-shadow: 0 0 80px rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            overflow: hidden;
        }

        /* ===== ЭКРАН ВЫБОРА ЯЗЫКА ===== */
        #language-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            background: linear-gradient(135deg, rgba(10, 20, 41, 0.95) 0%, rgba(10, 30, 58, 0.95) 100%);
        }

        .language-container {
            text-align: center;
            width: 100%;
            max-width: 400px;
            animation: fadeInScale 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .logo-3d {
            width: 120px;
            height: 120px;
            margin: 0 auto 30px;
            background: var(--primary-gradient);
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: white;
            box-shadow: 
                0 20px 50px rgba(0, 168, 255, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                0 0 30px rgba(0, 168, 255, 0.3);
            transform-style: preserve-3d;
            animation: floatLogo 3s ease-in-out infinite;
            border: 3px solid rgba(255, 255, 255, 0.1);
        }

        @keyframes floatLogo {
            0%, 100% {
                transform: translateY(0) rotateX(0) rotateY(0);
                box-shadow: 
                    0 20px 50px rgba(0, 168, 255, 0.4),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2),
                    0 0 30px rgba(0, 168, 255, 0.3);
            }
            50% {
                transform: translateY(-20px) rotateX(5deg) rotateY(5deg);
                box-shadow: 
                    0 30px 60px rgba(0, 168, 255, 0.6),
                    inset 0 1px 0 rgba(255, 255, 255, 0.3),
                    0 0 50px rgba(0, 168, 255, 0.5);
            }
        }

        .language-title {
            font-size: 42px;
            margin-bottom: 15px;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
            letter-spacing: 2px;
            text-transform: uppercase;
            transform: perspective(500px) rotateX(10deg);
            animation: titleGlow 2s infinite alternate;
        }

        @keyframes titleGlow {
            0% {
                text-shadow: 0 0 20px rgba(0, 168, 255, 0.5);
            }
            100% {
                text-shadow: 0 0 30px rgba(0, 168, 255, 0.8), 0 0 40px rgba(0, 102, 204, 0.5);
            }
        }

        .language-subtitle {
            color: var(--text-secondary);
            font-size: 16px;
            margin-bottom: 50px;
            font-weight: 600;
            padding: 0 20px;
            line-height: 1.5;
        }

        .language-buttons {
            display: flex;
            flex-direction: column;
            gap: 20px;
            perspective: 1000px;
        }

        .language-btn {
            padding: 22px;
            font-size: 18px;
            transform-style: preserve-3d;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            background: linear-gradient(135deg, rgba(10, 30, 58, 0.9) 0%, rgba(26, 47, 90, 0.9) 100%);
            backdrop-filter: blur(10px);
            cursor: pointer;
            color: white;
            font-weight: 600;
        }

        .language-btn:hover {
            transform: translateY(-5px) rotateX(5deg);
            border-color: rgba(0, 168, 255, 0.5);
            box-shadow: 
                0 15px 35px rgba(0, 168, 255, 0.3),
                0 0 30px rgba(0, 168, 255, 0.2);
        }

        .language-btn.primary {
            background: linear-gradient(135deg, rgba(0, 168, 255, 0.2) 0%, rgba(0, 102, 204, 0.2) 100%);
            border-color: rgba(0, 168, 255, 0.3);
        }

        /* ===== ОБНОВЛЕННЫЕ КАРТОЧКИ ===== */
        .card-3d {
            background: linear-gradient(135deg, rgba(10, 30, 58, 0.95) 0%, rgba(26, 47, 90, 0.95) 100%);
            border-radius: 25px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            transform-style: preserve-3d;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        .card-3d::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.08), transparent);
            transition: left 0.7s;
        }

        .card-3d:hover::before {
            left: 100%;
        }

        .card-3d:hover {
            transform: translateY(-10px) rotateX(5deg);
            border-color: rgba(0, 168, 255, 0.4);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.4),
                0 0 50px rgba(0, 168, 255, 0.2);
        }

        /* ===== КНОПКИ С 3D ЭФФЕКТАМИ ===== */
        .btn-3d {
            background: linear-gradient(135deg, #0A1E3A 0%, #1A2F5A 100%);
            color: white;
            border: none;
            padding: 18px 28px;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin: 12px 0;
            width: 100%;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transform-style: preserve-3d;
            font-family: 'Poppins', sans-serif;
        }

        .btn-3d::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 30%, rgba(255, 255, 255, 0.12) 50%, transparent 70%);
            transition: transform 0.5s ease;
            transform: translateX(-100%);
        }

        .btn-3d:hover::before {
            transform: translateX(100%);
        }

        .btn-3d:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 
                0 20px 40px rgba(0, 168, 255, 0.4),
                0 0 40px rgba(0, 168, 255, 0.2);
            border-color: rgba(0, 168, 255, 0.6);
        }

        .btn-3d.primary {
            background: linear-gradient(135deg, #00A8FF 0%, #0066CC 100%);
            border-color: rgba(0, 168, 255, 0.6);
            box-shadow: 0 10px 30px rgba(0, 168, 255, 0.3);
        }

        .btn-3d.secondary {
            background: linear-gradient(135deg, #FF3366 0%, #E62E5C 100%);
            border-color: rgba(255, 51, 102, 0.6);
            box-shadow: 0 10px 30px rgba(255, 51, 102, 0.3);
        }

        .btn-3d:active {
            transform: translateY(-2px) scale(0.98);
        }

        /* ===== ЗАГОЛОВКИ ===== */
        h1 {
            text-align: center;
            font-size: 36px;
            margin-bottom: 25px;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 900;
            text-shadow: 0 5px 15px rgba(0, 168, 255, 0.3);
            padding: 10px;
            transform: perspective(500px) rotateX(10deg);
            font-family: 'Poppins', sans-serif;
        }

        h2 {
            font-size: 28px;
            margin-bottom: 20px;
            color: var(--text-primary);
            font-weight: 800;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            font-family: 'Poppins', sans-serif;
        }

        h3 {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--text-primary);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
            font-family: 'Poppins', sans-serif;
        }

        /* ===== ЭКРАН ИНСТРУКЦИИ (НАЧАЛЬНЫЙ) ===== */
        #instruction-modal {
            padding: 20px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(10, 20, 41, 0.95) 0%, rgba(10, 30, 58, 0.95) 100%);
        }

        .instruction-modal-container {
            background: linear-gradient(135deg, rgba(10, 30, 58, 0.95) 0%, rgba(26, 47, 90, 0.95) 100%);
            border-radius: 30px;
            padding: 35px;
            width: 100%;
            max-width: 500px;
            border: 2px solid rgba(0, 168, 255, 0.4);
            box-shadow: 
                0 40px 70px rgba(0, 0, 0, 0.6),
                0 0 60px rgba(0, 168, 255, 0.25);
            backdrop-filter: blur(20px);
            transform-style: preserve-3d;
            animation: modalAppear 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: translateY(50px) rotateX(-15deg) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) rotateX(0) scale(1);
            }
        }

        .instruction-modal-header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .warning-icon-3d {
            font-size: 70px;
            margin-bottom: 20px;
            display: inline-block;
            animation: warningPulse 2s infinite;
            filter: drop-shadow(0 0 25px rgba(255, 51, 102, 0.6));
        }

        @keyframes warningPulse {
            0%, 100% {
                transform: scale(1) rotate(0deg);
                filter: drop-shadow(0 0 20px rgba(255, 51, 102, 0.6));
            }
            50% {
                transform: scale(1.15) rotate(5deg);
                filter: drop-shadow(0 0 30px rgba(255, 51, 102, 0.9));
            }
        }

        /* ===== ТЕКСТ В ЯЧЕЙКАХ ===== */
        .text-container {
            background: rgba(10, 20, 41, 0.8);
            border-radius: 20px;
            padding: 25px;
            margin: 15px 0;
            border: 2px solid rgba(0, 168, 255, 0.25);
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(10px);
        }

        .text-content {
            color: var(--text-secondary);
            font-size: 15px;
            line-height: 1.8;
            text-align: justify;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            padding: 10px;
            font-family: 'Poppins', sans-serif;
        }

        .text-content p {
            margin-bottom: 15px;
            padding: 12px 15px;
            border-left: 4px solid var(--accent-blue);
            background: linear-gradient(90deg, rgba(0, 168, 255, 0.08) 0%, transparent 100%);
            border-radius: 0 12px 12px 0;
            position: relative;
            transition: all 0.3s ease;
        }

        .text-content p:hover {
            background: linear-gradient(90deg, rgba(0, 168, 255, 0.15) 0%, transparent 100%);
            transform: translateX(5px);
        }

        .text-content strong {
            color: var(--accent-blue);
            font-weight: 700;
            background: linear-gradient(45deg, var(--accent-blue), var(--accent-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(0, 168, 255, 0.3);
        }

        /* ===== ОБНОВЛЕННЫЕ ИГРОВЫЕ КАРТОЧКИ ===== */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin-bottom: 30px;
            perspective: 1000px;
        }

        .game-card-3d {
            background: linear-gradient(135deg, rgba(10, 30, 58, 0.95) 0%, rgba(26, 47, 90, 0.95) 100%);
            border-radius: 25px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .game-card-3d::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--primary-gradient);
        }

        .game-card-3d::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.12), transparent);
            transition: left 0.7s;
        }

        .game-card-3d:hover::after {
            left: 100%;
        }

        .game-card-3d:hover {
            transform: translateY(-15px) rotateX(10deg) scale(1.05);
            border-color: rgba(0, 168, 255, 0.5);
            box-shadow: 
                0 30px 60px rgba(0, 168, 255, 0.4),
                0 0 50px rgba(0, 168, 255, 0.25);
        }

        .game-card-inner {
            padding: 25px;
            background: rgba(10, 20, 41, 0.9);
            border-radius: 20px;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .game-icon-3d {
            font-size: 55px;
            margin-bottom: 20px;
            display: inline-block;
            animation: iconFloat 3s ease-in-out infinite;
            filter: drop-shadow(0 0 20px currentColor);
            background: linear-gradient(45deg, var(--accent-blue), var(--accent-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        @keyframes iconFloat {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-15px) rotate(5deg);
            }
        }

        .game-content h3 {
            color: white;
            font-size: 22px;
            margin-bottom: 12px;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
            width: 100%;
            padding: 0 5px;
            background: linear-gradient(45deg, #fff, var(--accent-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .game-description {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 20px;
            line-height: 1.6;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 10px;
            text-overflow: ellipsis;
            overflow: hidden;
            font-weight: 500;
        }

        .game-stats {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
        }

        .game-stats .stat {
            color: var(--accent-blue);
            background: rgba(0, 168, 255, 0.15);
            padding: 10px 15px;
            border-radius: 12px;
            text-align: center;
            font-size: 13px;
            font-weight: 600;
            border: 1px solid rgba(0, 168, 255, 0.25);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }

        .game-stats .stat:hover {
            background: rgba(0, 168, 255, 0.25);
            transform: translateY(-2px);
        }

        /* ===== НИЖНЕЕ МЕНЮ 3D ===== */
        .bottom-nav-3d {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(180deg, rgba(10, 20, 41, 0.95) 0%, rgba(10, 30, 58, 0.95) 100%);
            border-top: 2px solid rgba(0, 168, 255, 0.4);
            display: flex;
            justify-content: space-around;
            padding: 20px 0;
            max-width: 500px;
            margin: 0 auto;
            z-index: 1000;
            backdrop-filter: blur(25px);
            box-shadow: 0 -15px 50px rgba(0, 0, 0, 0.5);
            border-radius: 30px 30px 0 0;
            transform-style: preserve-3d;
        }

        .nav-item-3d {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 24px;
            cursor: pointer;
            opacity: 0.6;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 15px;
            min-width: 85px;
            transform-style: preserve-3d;
            position: relative;
        }

        .nav-item-3d::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--primary-gradient);
            border-radius: 15px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .nav-item-3d:hover {
            opacity: 0.9;
            transform: translateY(-8px) scale(1.1);
        }

        .nav-item-3d.active {
            opacity: 1;
            transform: translateY(-15px) scale(1.15);
        }

        .nav-item-3d.active::before {
            opacity: 0.2;
        }

        .nav-item-3d.active .nav-icon-3d {
            color: var(--accent-blue);
            transform: scale(1.3) translateZ(20px);
            filter: drop-shadow(0 0 20px var(--accent-blue));
        }

        .nav-item-3d.active .nav-label {
            color: var(--accent-blue);
            transform: translateZ(10px);
        }

        .nav-icon-3d {
            font-size: 30px;
            margin-bottom: 10px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
        }

        .nav-label {
            font-size: 12px;
            font-weight: 700;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            transition: all 0.3s ease;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
            max-width: 100%;
            font-family: 'Poppins', sans-serif;
        }

        /* ===== ОБНОВЛЕННЫЕ ПОЛЯ ВВОДА ===== */
        .input-container-3d {
            position: relative;
            margin: 20px 0;
            transform-style: preserve-3d;
        }

        input#user-id {
            width: 100%;
            padding: 22px 70px 22px 60px;
            border: 3px solid rgba(0, 168, 255, 0.4);
            border-radius: 18px;
            background: rgba(10, 20, 41, 0.9);
            color: white;
            font-size: 26px;
            text-align: center;
            letter-spacing: 5px;
            font-weight: 800;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'Courier New', monospace;
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
            transform-style: preserve-3d;
        }

        input#user-id:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 
                0 20px 45px rgba(0, 168, 255, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                0 0 40px rgba(0, 168, 255, 0.35);
            transform: translateY(-5px) scale(1.02);
        }

        input#user-id::placeholder {
            color: rgba(255, 255, 255, 0.35);
            letter-spacing: normal;
            font-size: 18px;
            font-weight: 600;
        }

        /* ===== ОБНОВЛЕННЫЙ БЛОК ССЫЛКИ В ГАЙДЕ ===== */
        .link-guide-container {
            margin: 30px 0;
            perspective: 1000px;
        }

        .link-title-box {
            background: linear-gradient(135deg, rgba(255, 51, 102, 0.25) 0%, rgba(230, 46, 92, 0.25) 100%);
            border: 3px solid rgba(255, 51, 102, 0.5);
            border-radius: 20px 20px 0 0;
            padding: 25px;
            text-align: center;
            backdrop-filter: blur(15px);
            transform-style: preserve-3d;
            animation: linkTitleGlow 2s infinite alternate;
        }

        @keyframes linkTitleGlow {
            0% {
                box-shadow: 0 10px 30px rgba(255, 51, 102, 0.3);
            }
            100% {
                box-shadow: 0 20px 40px rgba(255, 51, 102, 0.5);
            }
        }

        .link-box {
            background: linear-gradient(135deg, rgba(0, 168, 255, 0.25) 0%, rgba(0, 102, 204, 0.25) 100%);
            border: 3px solid rgba(0, 168, 255, 0.5);
            border-radius: 0 0 20px 20px;
            padding: 35px;
            text-align: center;
            backdrop-filter: blur(15px);
            transform-style: preserve-3d;
            animation: linkBoxGlow 3s infinite alternate;
            margin-top: -2px;
        }

        @keyframes linkBoxGlow {
            0% {
                box-shadow: 0 15px 35px rgba(0, 168, 255, 0.4);
            }
            100% {
                box-shadow: 0 25px 55px rgba(0, 168, 255, 0.6), 0 0 50px rgba(0, 168, 255, 0.3);
            }
        }

        /* ===== ПЕРЕДЕЛАННЫЙ ПРОМОКОД В ГАЙДЕ ===== */
        .promo-guide-container {
            margin: 30px 0;
            perspective: 1000px;
        }

        .promo-title-box {
            background: linear-gradient(135deg, rgba(255, 51, 102, 0.25) 0%, rgba(230, 46, 92, 0.25) 100%);
            border: 3px solid rgba(255, 51, 102, 0.5);
            border-radius: 20px 20px 0 0;
            padding: 25px;
            text-align: center;
            backdrop-filter: blur(15px);
            transform-style: preserve-3d;
            animation: promoTitleGlow 2s infinite alternate;
        }

        @keyframes promoTitleGlow {
            0% {
                box-shadow: 0 10px 30px rgba(255, 51, 102, 0.3);
            }
            100% {
                box-shadow: 0 20px 40px rgba(255, 51, 102, 0.5);
            }
        }

        .promo-code-box {
            background: linear-gradient(135deg, rgba(0, 168, 255, 0.25) 0%, rgba(0, 102, 204, 0.25) 100%);
            border: 3px solid rgba(0, 168, 255, 0.5);
            border-radius: 0 0 20px 20px;
            padding: 35px;
            text-align: center;
            backdrop-filter: blur(15px);
            transform-style: preserve-3d;
            animation: promoCodeGlow 3s infinite alternate;
            margin-top: -2px;
        }

        @keyframes promoCodeGlow {
            0% {
                box-shadow: 0 15px 35px rgba(0, 168, 255, 0.4);
            }
            100% {
                box-shadow: 0 25px 55px rgba(0, 168, 255, 0.6), 0 0 50px rgba(0, 168, 255, 0.3);
            }
        }

        .link-text-3d, .promo-text-3d {
            color: var(--accent-blue);
            font-size: 22px;
            font-weight: 900;
            letter-spacing: 1px;
            font-family: 'Courier New', monospace;
            text-shadow: 
                0 0 25px var(--accent-blue),
                0 0 50px rgba(0, 168, 255, 0.6);
            animation: textShimmer 2s infinite;
            background: linear-gradient(45deg, var(--accent-blue), var(--accent-cyan), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% auto;
            word-break: break-all;
            line-height: 1.4;
            padding: 10px;
            margin: 15px 0;
        }

        @keyframes textShimmer {
            0%, 100% {
                background-position: -200% center;
            }
            50% {
                background-position: 200% center;
            }
        }

        /* ===== 3D МОДАЛЬНЫЕ ОКНА ===== */
        .modal-3d {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            animation: fadeIn 0.3s ease;
            padding: 20px;
            perspective: 1000px;
        }

        .modal-overlay-3d {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(25px);
            animation: overlayFade 0.3s ease;
        }

        @keyframes overlayFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-container-3d {
            background: linear-gradient(135deg, rgba(10, 30, 58, 0.98) 0%, rgba(26, 47, 90, 0.98) 100%);
            border-radius: 35px;
            padding: 40px;
            max-width: 100%;
            width: 440px;
            border: 3px solid rgba(0, 168, 255, 0.6);
            box-shadow: 
                0 40px 70px rgba(0, 168, 255, 0.4),
                0 0 70px rgba(0, 168, 255, 0.3);
            animation: modalSlide3D 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            transform-style: preserve-3d;
            backdrop-filter: blur(25px);
            position: relative;
            z-index: 3001;
        }

        @keyframes modalSlide3D {
            0% {
                opacity: 0;
                transform: translateY(-100px) rotateX(-45deg) scale(0.8);
            }
            100% {
                opacity: 1;
                transform: translateY(0) rotateX(0) scale(1);
            }
        }

        /* ===== ИГРОВЫЕ ЭКРАНЫ С УЛУЧШЕННЫМИ 3D ЭФФЕКТАМИ ===== */
        .game-screen-3d {
            padding: 20px;
            background: var(--dark-bg);
            min-height: 100vh;
            position: relative;
            overflow: hidden;
            perspective: 1000px;
            padding-bottom: 140px;
        }

        .game-screen-3d::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(0, 168, 255, 0.2) 0%, transparent 60%),
                radial-gradient(circle at 80% 20%, rgba(0, 102, 204, 0.2) 0%, transparent 60%),
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 40px,
                    rgba(0, 168, 255, 0.05) 40px,
                    rgba(0, 168, 255, 0.05) 80px
                );
            z-index: -1;
        }

        /* МИНЫ - 3D ГРИД */
        .mines-grid-3d {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin: 30px 0;
            padding: 30px;
            background: linear-gradient(135deg, rgba(10, 30, 58, 0.95) 0%, rgba(26, 47, 90, 0.95) 100%);
            border-radius: 30px;
            border: 3px solid rgba(0, 168, 255, 0.4);
            perspective: 1200px;
            transform-style: preserve-3d;
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
        }

        .mine-cell-3d {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #0A1E3A 0%, #1A2F5A 100%);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid rgba(255, 255, 255, 0.15);
            position: relative;
            overflow: hidden;
            transform-style: preserve-3d;
            box-shadow: 
                0 10px 25px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.12);
        }

        .mine-cell-3d:hover {
            transform: translateZ(25px) scale(1.12);
            border-color: rgba(0, 168, 255, 0.6);
            box-shadow: 
                0 20px 40px rgba(0, 168, 255, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .mine-cell-3d.has-star {
            background: linear-gradient(135deg, #FF3366 0%, #E62E5C 100%);
            border-color: #FF3366;
            animation: starAppear 0.8s ease-out forwards;
            transform-style: preserve-3d;
        }

        @keyframes starAppear {
            0% {
                transform: scale(0.5) rotate(0deg);
                opacity: 0;
                box-shadow: 0 0 0 rgba(255, 51, 102, 0);
            }
            70% {
                transform: scale(1.1) rotate(10deg);
                opacity: 1;
                box-shadow: 0 15px 30px rgba(255, 51, 102, 0.6);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
                box-shadow: 
                    0 10px 25px rgba(255, 51, 102, 0.4),
                    0 0 30px rgba(255, 51, 102, 0.3);
            }
        }

        .star-3d {
            color: #FFD700;
            text-shadow: 
                0 0 25px #FFD700,
                0 0 50px rgba(255, 215, 0, 0.5);
            font-size: 32px;
            animation: starFloat 2s ease-in-out infinite;
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.5));
            transform-style: preserve-3d;
        }

        @keyframes starFloat {
            0%, 100% {
                transform: translateY(0px) rotate(0deg) scale(1);
                filter: drop-shadow(0 0 15px #FFD700);
            }
            50% {
                transform: translateY(-8px) rotate(5deg) scale(1.1);
                filter: drop-shadow(0 0 25px #FFD700);
            }
        }

        /* ПЕНАЛЬТИ - 3D ГОЛОВАЯ */
        .goal-area-3d {
            position: relative;
            background: linear-gradient(135deg, #0a5c36 0%, #1e7d4d 100%);
            border-radius: 30px;
            padding: 30px;
            border: 4px solid rgba(255, 255, 255, 0.35);
            box-shadow: 
                0 25px 60px rgba(0, 0, 0, 0.7),
                inset 0 1px 0 rgba(255, 255, 255, 0.25);
            overflow: hidden;
            transform-style: preserve-3d;
            animation: goalAreaFloat 4s ease-in-out infinite;
            margin: 30px 0;
        }

        @keyframes goalAreaFloat {
            0%, 100% {
                transform: translateY(0) rotateX(0);
            }
            50% {
                transform: translateY(-12px) rotateX(5deg);
            }
        }

        .goal-grid-3d {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 12px;
            margin: 0 auto;
            aspect-ratio: 5/3;
            position: relative;
            z-index: 2;
            transform-style: preserve-3d;
        }

        .goal-cell-3d {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            position: relative;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            backdrop-filter: blur(15px);
            transform-style: preserve-3d;
            box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.1);
        }

        .goal-cell-3d:hover {
            transform: translateZ(20px) scale(1.12);
            border-color: rgba(0, 168, 255, 0.6);
            box-shadow: 
                0 15px 35px rgba(0, 168, 255, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.25);
        }

        .goal-cell-3d.target {
            border-color: #FF3366;
            background: linear-gradient(135deg, rgba(255, 51, 102, 0.9) 0%, rgba(230, 46, 92, 0.9) 100%);
            animation: targetAppear 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            z-index: 3;
            transform-style: preserve-3d;
        }

        @keyframes targetAppear {
            0% {
                transform: scale(0) rotate(0deg);
                box-shadow: 0 0 0 rgba(255, 51, 102, 0);
            }
            70% {
                transform: scale(1.2) rotate(5deg);
                box-shadow: 0 20px 40px rgba(255, 51, 102, 0.8);
            }
            100% {
                transform: scale(1) rotate(0deg);
                box-shadow: 
                    0 15px 30px rgba(255, 51, 102, 0.6),
                    0 0 40px rgba(255, 51, 102, 0.4);
                animation: targetPulse 2s ease-in-out infinite alternate;
            }
        }

        @keyframes targetPulse {
            0% {
                transform: scale(1) translateZ(0);
                box-shadow: 0 0 25px rgba(255, 51, 102, 0.6);
            }
            100% {
                transform: scale(1.08) translateZ(15px);
                box-shadow: 0 0 40px rgba(255, 51, 102, 0.8);
            }
        }

        /* ОРЕЛ И РЕШКА - КРАСИВАЯ МОНЕТА */
        .coin-container-3d {
            perspective: 1500px;
            margin: 50px auto;
            width: 250px;
            height: 250px;
            position: relative;
            z-index: 1;
            transform-style: preserve-3d;
        }

        .coin-3d-model {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.1s linear;
            animation: coinIdle 4s ease-in-out infinite;
        }

        @keyframes coinIdle {
            0%, 100% {
                transform: rotateY(0deg) translateY(0) scale(1);
            }
            25% {
                transform: rotateY(90deg) translateY(-10px) scale(1.05);
            }
            50% {
                transform: rotateY(180deg) translateY(0) scale(1);
            }
            75% {
                transform: rotateY(270deg) translateY(-10px) scale(1.05);
            }
        }

        .coin-3d-model.flipping {
            animation: coinFlip3D 2.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes coinFlip3D {
            0% {
                transform: rotateY(0deg) translateY(0) scale(1);
            }
            25% {
                transform: rotateY(90deg) translateY(-60px) scale(1.1);
            }
            50% {
                transform: rotateY(180deg) translateY(0) scale(1);
            }
            75% {
                transform: rotateY(270deg) translateY(-60px) scale(1.1);
            }
            100% {
                transform: rotateY(360deg) translateY(0) scale(1);
            }
        }

        .coin-front-3d-model, .coin-back-3d-model {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 45px;
            font-weight: 900;
            border: 12px solid rgba(0, 168, 255, 0.7);
            box-shadow: 
                0 25px 60px rgba(0, 0, 0, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.35),
                0 0 40px rgba(0, 168, 255, 0.4);
            transform-style: preserve-3d;
            background: linear-gradient(135deg, #FFD700 0%, #FF9900 100%);
            color: #8B4513;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-family: 'Poppins', sans-serif;
        }

        .coin-front-3d-model::before, .coin-back-3d-model::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 4px solid rgba(139, 69, 19, 0.3);
            border-radius: 50%;
        }

        .coin-back-3d-model {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, #C0C0C0 0%, #A9A9A9 100%);
            color: #333;
        }

        /* TOWER RUSH - УЛУЧШЕННАЯ АНИМАЦИЯ СТРОИТЕЛЬСТВА ЭТАЖЕЙ */
        .tower-container-3d {
            position: relative;
            height: 500px;
            margin: 40px auto;
            width: 260px;
            z-index: 1;
            perspective: 1000px;
            transform-style: preserve-3d;
        }

        .tower-base-3d {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            border-radius: 30px 30px 0 0;
            border: 8px solid rgba(0, 0, 0, 0.6);
            box-shadow: 
                0 -20px 40px rgba(0, 0, 0, 0.7),
                inset 0 8px 20px rgba(255, 255, 255, 0.15);
            z-index: 10;
            transform-style: preserve-3d;
            animation: baseGlow 3s infinite alternate;
        }

        @keyframes baseGlow {
            0% {
                box-shadow: 
                    0 -20px 40px rgba(0, 0, 0, 0.7),
                    inset 0 8px 20px rgba(255, 255, 255, 0.15);
            }
            100% {
                box-shadow: 
                    0 -20px 40px rgba(0, 0, 0, 0.7),
                    inset 0 8px 20px rgba(255, 255, 255, 0.15),
                    0 0 30px rgba(255, 215, 0, 0.3);
            }
        }

        .tower-floors-3d {
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 220px;
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
            gap: 4px;
            z-index: 5;
            transform-style: preserve-3d;
        }

        .tower-floor-3d {
            width: 100%;
            height: 45px;
            background: linear-gradient(135deg, #FFD700 0%, #FF9900 100%);
            border-radius: 20px 20px 10px 10px;
            border: 6px solid #8B4513;
            box-shadow: 
                0 12px 30px rgba(0, 0, 0, 0.6),
                inset 0 10px 25px rgba(255, 255, 255, 0.45);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            transform-origin: bottom;
            transform-style: preserve-3d;
        }

        .tower-floor-3d.build-animation {
            animation: floorBuild3D 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes floorBuild3D {
            0% {
                transform: scaleY(0) translateY(70px) rotateX(-90deg);
                opacity: 0;
                box-shadow: 0 0 0 rgba(0, 0, 0, 0);
            }
            50% {
                transform: scaleY(1.2) translateY(-25px) rotateX(20deg);
                opacity: 1;
                box-shadow: 0 20px 40px rgba(255, 215, 0, 0.5);
            }
            70% {
                transform: scaleY(0.95) translateY(5px) rotateX(-5deg);
            }
            100% {
                transform: scaleY(1) translateY(0) rotateX(0);
                opacity: 1;
                box-shadow: 
                    0 12px 30px rgba(0, 0, 0, 0.6),
                    inset 0 10px 25px rgba(255, 255, 255, 0.45);
                animation: floorGlow 2s infinite alternate 1s;
            }
        }

        @keyframes floorGlow {
            0% {
                box-shadow: 
                    0 12px 30px rgba(0, 0, 0, 0.6),
                    inset 0 10px 25px rgba(255, 255, 255, 0.45);
                transform: translateZ(0);
            }
            100% {
                box-shadow: 
                    0 20px 45px rgba(255, 215, 0, 0.6),
                    inset 0 10px 25px rgba(255, 255, 255, 0.6),
                    0 0 30px rgba(255, 215, 0, 0.4);
                transform: translateZ(15px);
            }
        }

        .tower-floor-3d::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);
            animation: floorShine 3s infinite;
        }

        @keyframes floorShine {
            0%, 100% {
                transform: translateX(-100%);
            }
            50% {
                transform: translateX(100%);
            }
        }

        /* ===== УНИВЕРСАЛЬНЫЕ СТИЛИ ДЛЯ ТЕКСТА В ЯЧЕЙКАХ ===== */
        .cell-text {
            padding: 20px;
            margin: 15px 0;
            background: rgba(10, 20, 41, 0.75);
            border-radius: 20px;
            border: 2px solid rgba(0, 168, 255, 0.3);
            font-size: 15px;
            line-height: 1.8;
            color: var(--text-secondary);
            word-wrap: break-word;
            overflow-wrap: break-word;
            text-align: left;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            font-family: 'Poppins', sans-serif;
        }

        .cell-text::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: var(--primary-gradient);
            border-radius: 2px 0 0 2px;
        }

        .cell-text p {
            margin: 12px 0;
            padding-left: 15px;
            border-left: 3px solid rgba(0, 168, 255, 0.4);
            transition: all 0.3s ease;
        }

        .cell-text p:hover {
            border-left: 3px solid var(--accent-blue);
            padding-left: 20px;
        }

        /* ===== КРАСИВЫЕ ТЕКСТОВЫЕ ЭФФЕКТЫ ===== */
        .gradient-text {
            background: linear-gradient(45deg, var(--accent-blue), var(--accent-cyan), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% auto;
            animation: gradientShift 3s ease-in-out infinite alternate;
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }
            100% {
                background-position: 100% 50%;
            }
        }

        .elegant-text {
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            color: var(--text-secondary);
            line-height: 1.8;
            letter-spacing: 0.3px;
        }

        .highlight-text {
            background: linear-gradient(90deg, transparent, rgba(0, 168, 255, 0.15), transparent);
            padding: 12px 20px;
            border-radius: 15px;
            margin: 10px 0;
            border-left: 4px solid var(--accent-blue);
            transition: all 0.3s ease;
        }

        .highlight-text:hover {
            background: linear-gradient(90deg, transparent, rgba(0, 168, 255, 0.25), transparent);
            transform: translateX(5px);
        }

        /* ===== РОВНЫЕ ТЕКСТОВЫЕ КОНТЕЙНЕРЫ ===== */
        .uniform-text-box {
            padding: 20px;
            margin: 15px 0;
            background: rgba(10, 30, 58, 0.8);
            border-radius: 18px;
            border: 2px solid rgba(0, 168, 255, 0.3);
            font-size: 15px;
            line-height: 1.7;
            color: var(--text-secondary);
            text-align: center;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            word-break: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            backdrop-filter: blur(8px);
            transition: all 0.3s ease;
        }

        .uniform-text-box:hover {
            border-color: rgba(0, 168, 255, 0.5);
            background: rgba(10, 30, 58, 0.9);
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 168, 255, 0.2);
        }

        /* ===== АНИМАЦИИ ===== */
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes floatAnimation {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-25px) rotate(5deg);
            }
        }

        /* ===== ПОСТОЯННЫЙ ФУТЕР ===== */
        .global-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.5);
            padding: 20px;
            max-width: 500px;
            margin: 0 auto;
            z-index: 999;
            background: linear-gradient(180deg, rgba(10, 20, 41, 0.95) 0%, rgba(10, 30, 58, 0.95) 100%);
            backdrop-filter: blur(25px);
            border-radius: 25px 25px 0 0;
            border-top: 2px solid rgba(0, 168, 255, 0.4);
            border-left: 1px solid rgba(0, 168, 255, 0.2);
            border-right: 1px solid rgba(0, 168, 255, 0.2);
            box-shadow: 0 -15px 50px rgba(0, 0, 0, 0.6);
            transform: translateZ(0);
        }

        .footer-content {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .footer-logo {
            font-size: 30px;
            background: linear-gradient(45deg, #00A8FF, #0066CC);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 15px rgba(0, 168, 255, 0.5));
        }

        .footer-info {
            flex: 1;
            text-align: left;
        }

        .footer-title {
            margin: 5px 0;
            font-weight: 600;
            letter-spacing: 0.5px;
            color: white;
        }

        .footer-bot {
            color: #00A8FF;
            font-weight: 800;
            font-family: 'Courier New', monospace;
            margin: 5px 0;
            letter-spacing: 1px;
            text-shadow: 0 0 15px rgba(0, 168, 255, 0.5);
        }

        .footer-lock {
            font-size: 25px;
            color: rgba(0, 168, 255, 0.6);
            filter: drop-shadow(0 0 15px rgba(0, 168, 255, 0.4));
        }

        /* ===== АДАПТИВНОСТЬ ===== */
        @media (max-width: 480px) {
            .games-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .language-title {
                font-size: 36px;
            }
            
            .logo-3d {
                width: 100px;
                height: 100px;
                font-size: 50px;
            }
            
            .game-icon-3d {
                font-size: 45px;
            }
            
            .game-content h3 {
                font-size: 20px;
            }
            
            .promo-text-3d {
                font-size: 30px;
            }
            
            input#user-id {
                font-size: 24px;
                padding: 20px 60px 20px 50px;
            }
            
            .bottom-nav-3d {
                padding: 18px 0;
            }
            
            .nav-item-3d {
                padding: 10px 20px;
                min-width: 75px;
            }
            
            .nav-icon-3d {
                font-size: 28px;
            }
            
            .coin-container-3d {
                width: 220px;
                height: 220px;
            }
            
            .coin-front-3d-model, .coin-back-3d-model {
                font-size: 40px;
            }
            
            .global-footer {
                padding: 15px;
            }
            
            .footer-content {
                gap: 15px;
            }
            
            .footer-logo {
                font-size: 25px;
            }
            
            .footer-lock {
                font-size: 22px;
            }
        }

        @media (max-width: 360px) {
            .instruction-modal-container {
                padding: 25px;
            }
            
            .card-3d {
                padding: 25px;
            }
            
            .btn-3d {
                padding: 16px 24px;
                font-size: 14px;
            }
            
            .promo-text-3d {
                font-size: 28px;
            }
            
            .global-footer {
                padding: 12px;
            }
        }

        /* ===== SCROLLBAR СТИЛИ ===== */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(10, 20, 41, 0.7);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-gradient);
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 168, 255, 0.6);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #0066CC 0%, #00A8FF 100%);
        }

        /* ===== ПРОЧИЕ СТИЛИ ===== */
        .hidden {
            display: none !important;
        }

        .visible {
            display: block !important;
        }

        .processing {
            animation: pulse 1.5s infinite !important;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.8;
                transform: scale(0.98);
            }
        }

        .text-truncate {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .elegant-shadow {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2), 0 0 40px rgba(0, 168, 255, 0.15);
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <!-- 3D Particle Background -->
    <div class="particles-3d" id="particles-3d"></div>
    
    <!-- Floating Background Text -->
    <div class="floating-background" id="floating-background">
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
        <div class="floating-text">1WIN</div>
    </div>
    
    <div id="app">
        <!-- ===== ЭКРАН ВЫБОРА ЯЗЫКА ===== -->
        <div id="language-screen" class="screen">
            <div class="language-container">
                <div class="logo-3d">🎯</div>
                <h1 class="language-title text-3d">1WIN SIGNALS</h1>
                <div class="language-subtitle">Select language / Выберите язык</div>
                
                <div class="language-buttons">
                    <button class="btn-3d language-btn primary" data-lang="ru">
                        <span class="btn-icon">🇷🇺</span>
                        Русский
                    </button>
                    <button class="btn-3d language-btn" data-lang="en">
                        <span class="btn-icon">🇺🇸</span>
                        English
                    </button>
                </div>
            </div>
        </div>

        <!-- ===== ЭКРАН ИНСТРУКЦИИ (НАЧАЛЬНЫЙ) ===== -->
        <div id="instruction-modal" class="screen hidden">
            <div class="instruction-modal-container card-3d">
                <div class="instruction-modal-header">
                    <div class="warning-icon-3d">⚠️</div>
                    <h1 id="instruction-title" class="text-glow"></h1>
                    <p id="instruction-subtitle" style="color: #00A8FF; font-weight: 700; font-size: 20px;" class="gradient-text"></p>
                </div>
                
                <div class="instruction-modal-body">
                    <div class="text-container">
                        <div class="text-content" id="short-instruction">
                            <p></p>
                        </div>
                        <div class="text-content hidden" id="full-instruction-text">
                            <!-- Полный текст инструкции будет вставлен через JavaScript -->
                        </div>
                    </div>
                    
                    <div class="expand-buttons">
                        <button class="btn-3d expand-btn" id="expand-btn">
                            <span class="btn-icon">📖</span>
                            <span id="expand-text"></span>
                        </button>
                    </div>
                    
                    <div class="hidden" id="action-buttons">
                        <button class="btn-3d btn-disabled acknowledge-btn" id="acknowledge-btn">
                            <span class="btn-icon">✅</span>
                            <span id="acknowledge-text"></span>
                        </button>
                        
                        <div class="uniform-text-box" style="border-color: rgba(255, 51, 102, 0.4); background: rgba(255, 51, 102, 0.15);">
                            <p id="warning-message" style="color: #FF8BA0; font-weight: 600;"></p>
                        </div>
                        
                        <button class="btn-3d secondary" id="register-link-btn">
                            <span class="btn-icon">🔗</span>
                            <span id="link-text"></span>
                        </button>
                        
                        <div class="promo-display">
                            <div class="promo-code-3d">
                                <span class="promo-text-3d">Pill2cb</span>
                                <button class="btn-3d primary" data-text="Pill2cb" style="width: auto; padding: 12px 24px;">
                                    <span class="btn-icon">📋</span>
                                    <span id="copy-text"></span>
                                </button>
                            </div>
                        </div>
                        
                        <button class="btn-3d btn-disabled registered-btn" id="registered-btn">
                            <span class="btn-icon">✅</span>
                            <span id="registered-text"></span>
                        </button>
                    </div>
                    
                    <button class="btn-3d primary continue-btn disabled" id="continue-btn" disabled style="margin-top: 30px;">
                        <span class="btn-icon">➡️</span>
                        <span id="continue-text"></span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Основные экраны приложения -->
        <div id="screens" class="hidden">
            
            <!-- ===== ЭКРАН АВТОРИЗАЦИИ ===== -->
            <div id="auth-screen" class="screen hidden">
                <div class="auth-header" style="text-align: center; padding: 40px 20px 30px;">
                    <div class="logo-3d" style="width: 100px; height: 100px; font-size: 50px;">🎯</div>
                    <h1 style="margin-top: 20px; font-size: 32px;" class="gradient-text" id="auth-title"></h1>
                    <div class="subtitle elegant-text" style="color: #8A8DA0; font-size: 14px; margin-top: 8px; letter-spacing: 1px;" id="auth-subtitle"></div>
                </div>
                
                <div class="container" style="padding: 0 20px 100px;">
                    <div class="card-3d" style="border-color: rgba(255, 51, 102, 0.5); background: rgba(255, 51, 102, 0.15);">
                        <div style="text-align: center; padding: 10px;">
                            <div style="font-size: 35px; margin-bottom: 15px; animation: warningPulse 2s infinite;">⚠️</div>
                            <p style="color: #FF8BA0; font-weight: 700; margin: 5px 0; font-size: 16px;"><strong id="access-restricted"></strong></p>
                            <p style="color: #FF8BA0; margin: 5px 0; font-size: 14px;" id="signals-only"></p>
                        </div>
                    </div>
                    
                    <!-- Шаг 1: Регистрация -->
                    <div class="card-3d" style="margin-top: 25px;">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            <div style="width: 35px; height: 35px; background: var(--primary-gradient); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 16px; color: white; box-shadow: 0 5px 15px rgba(0, 168, 255, 0.4);">1</div>
                            <h3 style="margin: 0; color: white; font-size: 20px;" id="step1-title"></h3>
                        </div>
                        <div class="uniform-text-box">
                            <p id="step1-text"></p>
                        </div>
                        <button id="go-to-twin" class="btn-3d primary" style="margin-top: 20px;">
                            <span class="btn-icon">🚀</span>
                            <span id="go-to-1win"></span>
                        </button>
                    </div>
                    
                    <!-- Шаг 2: Промокод -->
                    <div class="card-3d" style="margin-top: 25px;">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            <div style="width: 35px; height: 35px; background: var(--primary-gradient); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 16px; color: white; box-shadow: 0 5px 15px rgba(0, 168, 255, 0.4);">2</div>
                            <h3 style="margin: 0; color: white; font-size: 20px;" id="step2-title"></h3>
                        </div>
                        <div class="uniform-text-box">
                            <p id="step2-text"></p>
                        </div>
                        <div class="promo-code-3d" style="margin: 25px 0;">
                            <span class="promo-text-3d">Pill2cb</span>
                            <button class="btn-3d" data-text="Pill2cb" style="width: auto; padding: 12px 24px; background: rgba(0, 168, 255, 0.2); border: 2px solid rgba(0, 168, 255, 0.6);">
                                <span class="btn-icon">📋</span>
                            </button>
                        </div>
                        <div class="uniform-text-box" style="border-color: rgba(255, 51, 102, 0.4); background: rgba(255, 51, 102, 0.15);">
                            <p style="color: #FF8BA0; margin: 0; text-align: center; font-weight: 600;" id="promo-warning"></p>
                        </div>
                    </div>
                    
                    <!-- Шаг 3: Ввод ID -->
                    <div class="card-3d" style="margin-top: 25px;">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                            <div style="width: 35px; height: 35px; background: var(--primary-gradient); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 16px; color: white; box-shadow: 0 5px 15px rgba(0, 168, 255, 0.4);">3</div>
                            <h3 style="margin: 0; color: white; font-size: 20px;" id="step3-title"></h3>
                        </div>
                        
                        <div class="uniform-text-box">
                            <p id="step3-text"></p>
                        </div>
                        
                        <div class="input-container-3d" style="margin: 25px 0;">
                            <input type="text" id="user-id" placeholder="00000000" maxlength="13" inputmode="numeric" pattern="\d*">
                            <div style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); font-size: 35px; color: #FF3366; cursor: pointer; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; background: rgba(255, 51, 102, 0.1); border-radius: 50%; border: 2px solid rgba(255, 51, 102, 0.3); transition: all 0.3s ease;" id="clear-id">×</div>
                        </div>
                        
                        <div class="uniform-text-box" style="margin-bottom: 20px; text-align: center; font-style: italic;">
                            <p id="id-hint"></p>
                        </div>
                        
                        <div id="error-message" class="card-3d hidden" style="border-color: rgba(255, 51, 102, 0.6); background: rgba(255, 51, 102, 0.2); margin-bottom: 25px;">
                            <div style="display: flex; align-items: center; gap: 15px; padding: 20px;">
                                <div style="font-size: 30px; color: #FF3366; animation: pulse 1s infinite;">❌</div>
                                <div style="color: #FF8BA0; font-weight: 600; flex: 1; font-size: 15px;" id="error-text"></div>
                            </div>
                        </div>
                        
                        <button id="login-btn" class="btn-3d primary large" style="margin-top: 15px; padding: 20px; font-size: 18px;">
                            <span class="btn-icon">🎮</span>
                            <span id="enter-system"></span>
                        </button>
                    </div>
                    
                    <!-- Информация о безопасности -->
                    <div class="card-3d glass-effect" style="margin-top: 35px; border-color: rgba(0, 168, 255, 0.4);">
                        <div style="display: flex; align-items: center; gap: 20px; padding: 20px;">
                            <div style="font-size: 40px; color: #00A8FF; filter: drop-shadow(0 0 15px rgba(0, 168, 255, 0.5));">🔒</div>
                            <div class="uniform-text-box" style="border: none; background: transparent; padding: 0; text-align: left;">
                                <p id="security-text"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===== ГЛАВНЫЙ ЭКРАН (ИГРЫ) ===== -->
            <div id="main-screen" class="screen hidden">
                <div class="container" style="padding: 20px 20px 140px;">
                    <div style="text-align: center; margin-bottom: 40px; padding-top: 40px;">
                        <h1 style="margin-bottom: 15px; font-size: 36px;" class="gradient-text">🎮 <span id="main-title"></span></h1>
                        <p class="uniform-text-box" style="border: none; background: transparent; padding: 0;">
                            <span id="select-game"></span>
                        </p>
                        <div style="display: inline-flex; align-items: center; gap: 12px; background: rgba(0, 168, 255, 0.2); padding: 12px 30px; border-radius: 25px; border: 2px solid rgba(0, 168, 255, 0.4); backdrop-filter: blur(10px); margin-top: 15px;">
                            <div style="font-size: 22px;">📈</div>
                            <div style="color: #00A8FF; font-weight: 800; font-size: 16px; letter-spacing: 1px;" id="accuracy-text"></div>
                        </div>
                    </div>
                    
                    <!-- Сетка игр -->
                    <div class="games-grid">
                        <!-- Мины -->
                        <div class="game-card-3d" data-game="mines">
                            <div class="game-card-inner">
                                <div class="game-icon-3d">💣</div>
                                <div class="game-content">
                                    <h3 class="text-truncate" id="game-mines"></h3>
                                    <p class="uniform-text-box" style="border: none; background: transparent; padding: 10px; min-height: auto; margin: 10px 0;" id="mines-desc"></p>
                                    <div class="game-stats">
                                        <span class="stat text-truncate" id="mines-acc"></span>
                                        <span class="stat text-truncate" id="mines-fast"></span>
                                    </div>
                                </div>
                                <div style="position: absolute; top: 15px; right: 15px; padding: 6px 18px; border-radius: 12px; background: linear-gradient(135deg, #FF3366 0%, #E62E5C 100%); color: white; font-size: 11px; font-weight: 900; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 5px 15px rgba(255, 51, 102, 0.4);" id="hot-text"></div>
                            </div>
                        </div>
                        
                        <!-- Пенальти -->
                        <div class="game-card-3d" data-game="penalty">
                            <div class="game-card-inner">
                                <div class="game-icon-3d">⚽</div>
                                <div class="game-content">
                                    <h3 class="text-truncate" id="game-penalty"></h3>
                                    <p class="uniform-text-box" style="border: none; background: transparent; padding: 10px; min-height: auto; margin: 10px 0;" id="penalty-desc"></p>
                                    <div class="game-stats">
                                        <span class="stat text-truncate" id="penalty-acc"></span>
                                        <span class="stat text-truncate" id="penalty-zones"></span>
                                    </div>
                                </div>
                                <div style="position: absolute; top: 15px; right: 15px; padding: 6px 18px; border-radius: 12px; background: linear-gradient(135deg, #FFD700 0%, #FF9900 100%); color: #0A1429; font-size: 11px; font-weight: 900; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);" id="top-text"></div>
                            </div>
                        </div>
                        
                        <!-- Орел и Решка -->
                        <div class="game-card-3d" data-game="coinflip">
                            <div class="game-card-inner">
                                <div class="game-icon-3d">🪙</div>
                                <div class="game-content">
                                    <h3 class="text-truncate" id="game-coinflip"></h3>
                                    <p class="uniform-text-box" style="border: none; background: transparent; padding: 10px; min-height: auto; margin: 10px 0;" id="coinflip-desc"></p>
                                    <div class="game-stats">
                                        <span class="stat text-truncate" id="coinflip-acc"></span>
                                        <span class="stat text-truncate" id="coinflip-classic"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tower Rush -->
                        <div class="game-card-3d" data-game="tower">
                            <div class="game-card-inner">
                                <div class="game-icon-3d">🏗️</div>
                                <div class="game-content">
                                    <h3 class="text-truncate" id="game-tower"></h3>
                                    <p class="uniform-text-box" style="border: none; background: transparent; padding: 10px; min-height: auto; margin: 10px 0;" id="tower-desc"></p>
                                    <div class="game-stats">
                                        <span class="stat text-truncate" id="tower-acc"></span>
                                        <span class="stat text-truncate" id="tower-floors"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Нижнее меню -->
                <div class="bottom-nav-3d">
                    <div class="nav-item-3d active" data-screen="main">
                        <span class="nav-icon-3d">🎮</span>
                        <p class="nav-label" id="nav-games"></p>
                    </div>
                    <div class="nav-item-3d" data-screen="profile">
                        <span class="nav-icon-3d">👤</span>
                        <p class="nav-label" id="nav-profile"></p>
                    </div>
                    <div class="nav-item-3d" data-screen="instruction-menu">
                        <span class="nav-icon-3d">📖</span>
                        <p class="nav-label" id="nav-guide"></p>
                    </div>
                </div>
            </div>

            <!-- ===== ЭКРАН ПРОФИЛЯ ===== -->
            <div id="profile-screen" class="screen hidden">
                <div class="profile-header" style="text-align: center; padding: 50px 20px 40px;">
                    <div style="position: relative; width: 120px; height: 120px; margin: 0 auto 25px;">
                        <div style="width: 100%; height: 100%; background: var(--primary-gradient); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 50px; color: white; border: 5px solid rgba(255, 255, 255, 0.25); box-shadow: 0 20px 40px rgba(0, 168, 255, 0.5);">👤</div>
                        <div style="position: absolute; bottom: 10px; right: 10px; width: 25px; height: 25px; background: #00FF88; border-radius: 50%; border: 4px solid #0A1429; box-shadow: 0 0 20px #00FF88;"></div>
                    </div>
                    <h1 style="font-size: 36px;" class="gradient-text" id="profile-title"></h1>
                    <p class="uniform-text-box" style="border: none; background: transparent; padding: 0; margin-top: 10px;">
                        <span id="profile-subtitle"></span>
                    </p>
                </div>
                
                <div class="container" style="padding: 0 20px 140px;">
                    <!-- Информация пользователя -->
                    <div class="card-3d">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                            <h3 style="color: white; font-size: 28px; margin: 0;" id="username">Guest</h3>
                            <div style="background: linear-gradient(135deg, #FFD700 0%, #FF9900 100%); color: #0A1429; padding: 10px 30px; border-radius: 25px; font-weight: 900; font-size: 16px; text-transform: uppercase; letter-spacing: 2px; box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);">VIP</div>
                        </div>
                        
                        <div style="display: flex; flex-direction: column; gap: 25px;">
                            <div style="display: flex; align-items: center; gap: 25px;">
                                <div style="font-size: 30px; color: #00A8FF; width: 60px; height: 60px; background: rgba(0, 168, 255, 0.2); border-radius: 15px; display: flex; align-items: center; justify-content: center; border: 2px solid rgba(0, 168, 255, 0.4); box-shadow: 0 10px 25px rgba(0, 168, 255, 0.3);">🆔</div>
                                <div style="flex: 1;">
                                    <div class="uniform-text-box" style="border: none; background: transparent; padding: 0 0 8px 0; text-align: left; min-height: auto;">
                                        <span id="account-id-label"></span>
                                    </div>
                                    <div style="color: white; font-size: 22px; font-weight: 800; font-family: 'Courier New', monospace; letter-spacing: 2px; text-shadow: 0 0 20px rgba(0, 168, 255, 0.5);" id="display-id">00000000</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Статистика -->
                    <div class="card-3d" style="margin-top: 30px;">
                        <h3 style="color: white; font-size: 26px; margin-bottom: 25px;">📈 <span id="your-stats"></span></h3>
                        
                        <div style="background: rgba(10, 20, 41, 0.7); border-radius: 25px; padding: 40px; text-align: center; margin-bottom: 25px; border: 2px solid rgba(0, 168, 255, 0.3);">
                            <div style="font-size: 80px; font-weight: 900; background: var(--primary-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 15px; text-shadow: 0 8px 25px rgba(0, 168, 255, 0.4); font-family: 'Courier New', monospace;" id="signal-count">0</div>
                            <div class="uniform-text-box" style="border: none; background: transparent; padding: 0; text-transform: uppercase;">
                                <span id="signals-made"></span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Действия профиля -->
                    <div style="margin-top: 30px;">
                        <button id="change-id-btn" class="btn-3d secondary" style="padding: 20px;">
                            <span class="btn-icon">🔄</span>
                            <span id="change-id-text"></span>
                        </button>
                    </div>
                </div>
                
                <!-- Нижнее меню -->
                <div class="bottom-nav-3d">
                    <div class="nav-item-3d" data-screen="main">
                        <span class="nav-icon-3d">🎮</span>
                        <p class="nav-label" id="nav-games2"></p>
                    </div>
                    <div class="nav-item-3d active" data-screen="profile">
                        <span class="nav-icon-3d">👤</span>
                        <p class="nav-label" id="nav-profile2"></p>
                    </div>
                    <div class="nav-item-3d" data-screen="instruction-menu">
                        <span class="nav-icon-3d">📖</span>
                        <p class="nav-label" id="nav-guide2"></p>
                    </div>
                </div>
            </div>

            <!-- ===== ЭКРАН ИНСТРУКЦИИ (ИЗ МЕНЮ) ===== -->
            <div id="instruction-screen" class="screen hidden">
                <div class="container" style="padding: 20px 20px 140px;">
                    <div class="card-3d">
                        <h1 style="margin-bottom: 30px; font-size: 36px;" class="gradient-text">📖 <span id="guide-title"></span></h1>
                        
                        <div style="display: flex; justify-content: center; gap: 25px; margin: 30px 0 40px; flex-wrap: wrap;">
                            <div style="font-size: 50px; animation: floatAnimation 2s infinite;">🤖</div>
                            <div style="font-size: 50px; animation: floatAnimation 2s infinite 0.2s;">🎯</div>
                            <div style="font-size: 50px; animation: floatAnimation 2s infinite 0.4s;">💰</div>
                            <div style="font-size: 50px; animation: floatAnimation 2s infinite 0.6s;">⚡</div>
                            <div style="font-size: 50px; animation: floatAnimation 2s infinite 0.8s;">🏆</div>
                        </div>
                        
                        <div class="text-container" style="margin-bottom: 30px;">
                            <div class="text-content elegant-text" id="instruction-full-text">
                                <!-- Текст инструкции будет вставлен через JavaScript -->
                            </div>
                        </div>
                        
                        <!-- ОБНОВЛЕННЫЙ БЛОК ССЫЛКИ -->
                        <div class="link-guide-container">
                            <div class="link-title-box">
                                <div class="uniform-text-box" style="border: none; background: transparent; padding: 0; text-transform: uppercase;">
                                    <span id="official-link-text"></span>
                                </div>
                            </div>
                            <div class="link-box">
                                <div class="link-text-3d" style="margin-bottom: 25px; font-size: 22px;">https://lknt.pro/2d77a7</div>
                                <button class="btn-3d secondary" id="copy-instruction-link" style="padding: 18px;">
                                    <span class="btn-icon">📋</span>
                                    <span id="copy-link-text"></span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- ОБНОВЛЕННЫЙ БЛОК ПРОМОКОДА -->
                        <div class="promo-guide-container">
                            <div class="promo-title-box">
                                <div class="uniform-text-box" style="border: none; background: transparent; padding: 0; text-transform: uppercase;">
                                    <span id="mandatory-promo"></span>
                                </div>
                            </div>
                            <div class="promo-code-box">
                                <div class="promo-text-3d" style="margin-bottom: 25px; font-size: 36px;">Pill2CB</div>
                                <button class="btn-3d primary" id="copy-instruction-promo" style="padding: 18px;">
                                    <span class="btn-icon">📋</span>
                                    <span id="copy-promo-text"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn-3d" id="back-from-instruction" style="margin-top: 30px; padding: 18px;">
                        <span class="btn-icon">←</span>
                        <span id="back-menu-text"></span>
                    </button>
                </div>
                
                <!-- Нижнее меню -->
                <div class="bottom-nav-3d">
                    <div class="nav-item-3d" data-screen="main">
                        <span class="nav-icon-3d">🎮</span>
                        <p class="nav-label" id="nav-games3"></p>
                    </div>
                    <div class="nav-item-3d" data-screen="profile">
                        <span class="nav-icon-3d">👤</span>
                        <p class="nav-label" id="nav-profile3"></p>
                    </div>
                    <div class="nav-item-3d active" data-screen="instruction-menu">
                        <span class="nav-icon-3d">📖</span>
                        <p class="nav-label" id="nav-guide3"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Контейнер для игровых экранов -->
        <div id="game-container" class="hidden"></div>

        <!-- Модальное окно предупреждения перед игрой -->
        <div id="game-warning-modal" class="modal-3d hidden">
            <div class="modal-overlay-3d"></div>
            <div class="modal-container-3d">
                <div class="modal-header" style="display: flex; flex-direction: column; align-items: center; gap: 20px; margin-bottom: 30px;">
                    <div style="font-size: 70px; color: #FF3366; animation: warningPulse 1.5s infinite; filter: drop-shadow(0 0 30px rgba(255, 51, 102, 0.8));">⚠️</div>
                    <h3 style="color: #FF3366; font-size: 32px; margin: 0; text-align: center; text-shadow: 0 0 20px rgba(255, 51, 102, 0.5);" id="attention-text"></h3>
                </div>
                
                <div class="modal-body">
                    <div class="uniform-text-box" style="border-color: rgba(255, 51, 102, 0.5); background: rgba(255, 51, 102, 0.2); margin: 25px 0; padding: 25px;">
                        <p style="color: #FF8BA0; text-align: center; line-height: 1.8; margin: 0; font-size: 18px; font-weight: 600;" id="warning-modal-text">
                        </p>
                    </div>
                </div>
                
                <div class="modal-footer" style="display: flex; flex-direction: column; gap: 20px;">
                    <button class="btn-3d primary" id="confirm-promo-entered" style="padding: 20px; font-size: 18px;">
                        <span class="btn-icon">✅</span>
                        <span id="confirm-promo-text"></span>
                    </button>
                    <button class="btn-3d" id="cancel-game" style="padding: 20px; font-size: 18px;">
                        <span class="btn-icon">←</span>
                        <span id="cancel-text"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ПОСТОЯННЫЙ ФУТЕР -->
    <div class="global-footer">
        <div class="footer-content">
            <div class="footer-logo">🎯</div>
            <div class="footer-info">
                <p class="footer-title" id="footer-title">Twin Signals • Официальный партнер 1WIN</p>
                <p class="footer-bot">@OnewiinSignalls_bot</p>
            </div>
            <div class="footer-lock">🔐</div>
        </div>
    </div>

    <!-- ОСНОВНАЯ ЛОГИКА ПРИЛОЖЕНИЯ -->
    <script>
        // Telegram WebApp инициализация
        let tg = null;
        if (window.Telegram && window.Telegram.WebApp) {
            tg = window.Telegram.WebApp;
            tg.expand();
            tg.enableClosingConfirmation();
            tg.setHeaderColor('#0A1429');
            tg.setBackgroundColor('#0A1429');
            
            tg.MainButton.setText('Open 1WIN');
            tg.MainButton.onClick(() => {
                tg.openLink('https://lknt.pro/2d77a7');
            });
        }

        // Полный объект переводов
        const translations = {
            ru: {
                // Языковой экран
                selectLanguage: 'Выберите язык',
                
                // Инструкция
                important: 'Важно!',
                mandatory: 'Обязательно к прочтению!',
                shortInstruction: '[Нажмите "Развернуть" для полной инструкции]',
                expand: 'Развернуть',
                collapse: 'Свернуть',
                acknowledge: 'Я ознакомился с инструкцией',
                warning: 'Если аккаунт зарегистрирован не по ссылке ниже или без промокода, БОТ БУДЕТ ВЫДАВАТЬ ОШИБКИ!',
                linkBtn: 'Ссылка на 1WIN',
                copy: 'Копировать',
                registered: 'Я зарегистрировался по ссылке и ввел промокод',
                continue: 'Продолжить',
                instructionText: `<p><strong>Полная инструкция по использованию:</strong></p>
<p>1. Нажмите кнопку "Ссылка на 1WIN" и перейдите на официальный сайт</p>
<p>2. Зарегистрируйтесь, используя промокод <strong>PILL2CB</strong> в специальном поле</p>
<p>3. После регистрации найдите ваш ID в личном кабинете 1WIN</p>
<p>4. Вернитесь в приложение и введите ID в поле ввода</p>
<p>5. Выберите игру и получайте точные сигналы</p>
<p><strong>Важно:</strong> Без промокода доступ к сигналам будет ограничен!</p>`,
                instructionFullText: `<p><strong>Полная инструкция по использованию:</strong></p>
<p>1. Нажмите кнопку "Ссылка на 1WIN" и перейдите на официальный сайт</p>
<p>2. Зарегистрируйтесь, используя промокод <strong>PILL2CB</strong> в специальном поле</p>
<p>3. После регистрации найдите ваш ID в личном кабинете 1WIN</p>
<p>4. Вернитесь в приложение и введите ID в поле ввода</p>
<p>5. Выберите игру и получайте точные сигналы</p>
<p><strong>Важно:</strong> Без промокода доступ к сигналам будет ограничен!</p>`,
                
                // Авторизация
                authTitle: 'Twin Signals',
                authSubtitle: 'Официальный партнер 1WIN',
                accessRestricted: 'ДОСТУП ОГРАНИЧЕН',
                signalsOnly: 'Сигналы доступны только для игроков с активным ID 1WIN',
                step1Title: 'Регистрация аккаунта',
                step1Text: 'Зарегистрируйтесь на официальном сайте 1WIN',
                goTo1win: 'Перейти в 1WIN',
                step2Title: 'Промокод',
                step2Text: 'Во время регистрации обязательно укажите промокод',
                promoWarning: 'Без промокода доступ к сигналам не будет открыт!',
                step3Title: 'Ввод ID',
                step3Text: 'Введите ID вашего аккаунта 1WIN',
                idHint: 'Только цифры (5-13 символов). Без ввода ID доступ закрыт.',
                errorText: 'Ошибка! Введите правильный ID (только цифры, 5-13 символов).',
                enterSystem: 'ВОЙТИ В СИСТЕМУ',
                securityText: 'Ваши данные защищены. Приложение использует официальный API 1WIN',
                
                // Главный экран
                mainTitle: 'Twin Signals',
                selectGame: 'Выберите игру для получения сигнала',
                accuracyText: 'Точность: 92%',
                gameMines: 'МИНЫ',
                minesDesc: 'Найдите безопасные клетки',
                minesAcc: '🎯 Точность: 87%',
                minesFast: '⚡ Быстрые сигналы',
                hotText: 'ГОРЯЧЕЕ',
                gamePenalty: 'ПЕНАЛЬТИ',
                penaltyDesc: 'Определите зону удара',
                penaltyAcc: '🎯 Точность: 89%',
                penaltyZones: '⚽ 15 зон',
                topText: 'ТОП',
                gameCoinflip: 'ОРЕЛ И РЕШКА',
                coinflipDesc: 'Вероятность 50/50',
                coinflipAcc: '🎯 Точность: 91%',
                coinflipClassic: '🎲 Классика',
                gameTower: 'TOWER RUSH',
                towerDesc: 'Постройте безопасную башню',
                towerAcc: '🎯 Точность: 84%',
                towerFloors: '🏗️',
                navGames: 'Игры',
                navProfile: 'Профиль',
                navGuide: 'Гайд',
                
                // Профиль
                profileTitle: 'Профиль',
                profileSubtitle: 'Twin Signals',
                accountIdLabel: 'ID АККАУНТА',
                yourStats: 'Ваша статистика',
                signalsMade: 'СИГНАЛОВ СДЕЛАНО',
                changeIdText: 'Изменить ID',
                navGames2: 'Игры',
                navProfile2: 'Профиль',
                navGuide2: 'Гайд',
                
                // Инструкция из меню
                guideTitle: 'Гайд',
                officialLinkText: 'Единственная официальная ссылка на сайт 1WIN:',
                copyLinkText: 'Копировать ссылку',
                mandatoryPromo: 'ОБЯЗАТЕЛЬНЫЙ ПРОМОКОД:',
                copyPromoText: 'Копировать промокод',
                backMenuText: 'Назад в меню',
                navGames3: 'Игры',
                navProfile3: 'Профиль',
                navGuide3: 'Гайд',
                
                // Модальное окно игры
                attentionText: 'ВНИМАНИЕ!',
                warningModalText: 'ЕСЛИ ВЫ НЕ УКАЗАЛИ ПРОМОКОД <strong class="gradient-text">PILL2CB</strong> ПРИ РЕГИСТРАЦИИ, ТО СИГНАЛЫ БУДУТ НЕВЕРНЫМИ!',
                confirmPromoText: 'Я ВВЁЛ ПРОМОКОД',
                cancelText: 'ОТМЕНА',
                
                // Игры
                selectMines: 'Выберите количество мин:',
                oneMine: '1 мина',
                threeMines: '3 мины',
                fiveMines: '5 мин',
                sevenMines: '7 мин',
                signalReceived: 'Ожидание сигнала...',
                getSignal: 'ПОЛУЧИТЬ СИГНАЛ',
                toMenu: 'К основному меню',
                generating: 'Генерация...',
                waiting: 'Ожидайте...',
                signalReady: 'Сигнал готов!',
                selectZone: 'Выберите зону удара:',
                determiningZone: 'Определение зоны...',
                zoneSelected: 'Выбрана зона:',
                throwing: 'Бросок...',
                coinFlip: 'Монета в воздухе...',
                heads: 'ОРЁЛ',
                tails: 'РЕШКА',
                predictFloors: 'Предсказание безопасных этажей:',
                floors: 'Этажей:',
                building: 'Строительство...',
                buildingTower: 'Строительство башни...',
                safeFloors: 'Безопасных этажей',
                
                // Футер
                footerTitle: 'Twin Signals • Официальный партнер 1WIN'
            },
            en: {
                // Language screen
                selectLanguage: 'Select language',
                
                // Instruction
                important: 'Important!',
                mandatory: 'Required reading!',
                shortInstruction: '[Click "Expand" for full instructions]',
                expand: 'Expand',
                collapse: 'Collapse',
                acknowledge: 'I have read the instructions',
                warning: 'If the account is not registered using the link below or without the promo code, THE BOT WILL GIVE ERRORS!',
                linkBtn: 'Link to 1WIN',
                copy: 'Copy',
                registered: 'I registered via the link and entered the promo code',
                continue: 'Continue',
                instructionText: `<p><strong>Full usage instructions:</strong></p>
<p>1. Click the "Link to 1WIN" button and go to the official website</p>
<p>2. Register using promo code <strong>PILL2CB</strong> in the special field</p>
<p>3. After registration, find your ID in the 1WIN personal account</p>
<p>4. Return to the application and enter your ID in the input field</p>
<p>5. Select a game and get accurate signals</p>
<p><strong>Important:</strong> Without the promo code, access to signals will be limited!</p>`,
                instructionFullText: `<p><strong>Full usage instructions:</strong></p>
<p>1. Click the "Link to 1WIN" button and go to the official website</p>
<p>2. Register using promo code <strong>PILL2CB</strong> in the special field</p>
<p>3. After registration, find your ID in the 1WIN personal account</p>
<p>4. Return to the application and enter your ID in the input field</p>
<p>5. Select a game and get accurate signals</p>
<p><strong>Important:</strong> Without the promo code, access to signals will be limited!</p>`,
                
                // Authorization
                authTitle: 'Twin Signals',
                authSubtitle: 'Official 1WIN Partner',
                accessRestricted: 'ACCESS RESTRICTED',
                signalsOnly: 'Signals available only for players with active 1WIN ID',
                step1Title: 'Account registration',
                step1Text: 'Register on the official 1WIN website',
                goTo1win: 'Go to 1WIN',
                step2Title: 'Promo code',
                step2Text: 'During registration, be sure to specify the promo code',
                promoWarning: 'Without promo code, access to signals will not be opened!',
                step3Title: 'Enter ID',
                step3Text: 'Enter your 1WIN account ID',
                idHint: 'Only digits (5-13 characters). Without entering ID, access is closed.',
                errorText: 'Error! Enter correct ID (only digits, 5-13 characters).',
                enterSystem: 'ENTER SYSTEM',
                securityText: 'Your data is protected. The application uses the official 1WIN API',
                
                // Main screen
                mainTitle: 'Twin Signals',
                selectGame: 'Select a game to get a signal',
                accuracyText: 'Accuracy: 92%',
                gameMines: 'MINES',
                minesDesc: 'Find safe cells',
                minesAcc: '🎯 Accuracy: 87%',
                minesFast: '⚡ Fast signals',
                hotText: 'HOT',
                gamePenalty: 'PENALTY',
                penaltyDesc: 'Determine the strike zone',
                penaltyAcc: '🎯 Accuracy: 89%',
                penaltyZones: '⚽ 15 zones',
                topText: 'TOP',
                gameCoinflip: 'COIN FLIP',
                coinflipDesc: '50/50 probability',
                coinflipAcc: '🎯 Accuracy: 91%',
                coinflipClassic: '🎲 Classic',
                gameTower: 'TOWER RUSH',
                towerDesc: 'Build a safe tower',
                towerAcc: '🎯 Accuracy: 84%',
                towerFloors: '🏗️',
                navGames: 'Games',
                navProfile: 'Profile',
                navGuide: 'Guide',
                
                // Profile
                profileTitle: 'Profile',
                profileSubtitle: 'Twin Signals',
                accountIdLabel: 'ACCOUNT ID',
                yourStats: 'Your statistics',
                signalsMade: 'SIGNALS MADE',
                changeIdText: 'Change ID',
                navGames2: 'Games',
                navProfile2: 'Profile',
                navGuide2: 'Guide',
                
                // Instruction from menu
                guideTitle: 'Guide',
                officialLinkText: 'The only official link to 1WIN website:',
                copyLinkText: 'Copy link',
                mandatoryPromo: 'MANDATORY PROMO CODE:',
                copyPromoText: 'Copy promo code',
                backMenuText: 'Back to menu',
                navGames3: 'Games',
                navProfile3: 'Profile',
                navGuide3: 'Guide',
                
                // Game modal
                attentionText: 'ATTENTION!',
                warningModalText: 'IF YOU DID NOT SPECIFY THE PROMO CODE <strong class="gradient-text">PILL2CB</strong> DURING REGISTRATION THEN THE SIGNALS WILL BE INCORRECT!',
                confirmPromoText: 'I ENTERED THE PROMO CODE',
                cancelText: 'CANCEL',
                
                // Games
                selectMines: 'Select number of mines:',
                oneMine: '1 mine',
                threeMines: '3 mines',
                fiveMines: '5 mines',
                sevenMines: '7 mines',
                signalReceived: 'Waiting for signal...',
                getSignal: 'GET SIGNAL',
                toMenu: 'To main menu',
                generating: 'Generating...',
                waiting: 'Please wait...',
                signalReady: 'Signal ready!',
                selectZone: 'Select kick zone:',
                determiningZone: 'Determining zone...',
                zoneSelected: 'Selected zone:',
                throwing: 'Throwing...',
                coinFlip: 'Coin in air...',
                heads: 'HEADS',
                tails: 'TAILS',
                predictFloors: 'Predicting safe floors:',
                floors: 'Floors:',
                building: 'Building...',
                buildingTower: 'Building tower...',
                safeFloors: 'Safe floors',
                
                // Footer
                footerTitle: 'Twin Signals • Official 1WIN Partner'
            }
        };

        // Текущий язык
        let currentLang = 'en'; // По умолчанию английский
        
        // Основное состояние приложения
        let appState = {
            userId: null,
            username: 'Guest',
            signalCount: 0,
            isAuthenticated: false,
            acknowledged: false,
            registered: false,
            currentGame: null
        };

        // DOM элементы
        const screens = {
            language: document.getElementById('language-screen'),
            instruction: document.getElementById('instruction-modal'),
            screens: document.getElementById('screens'),
            auth: document.getElementById('auth-screen'),
            main: document.getElementById('main-screen'),
            profile: document.getElementById('profile-screen'),
            instructionMenu: document.getElementById('instruction-screen'),
            gameContainer: document.getElementById('game-container'),
            gameWarningModal: document.getElementById('game-warning-modal')
        };

        // Инициализация приложения
        function initApp() {
            // Создаем частицы
            createParticles();
            
            // Загружаем сохраненные данные
            loadSavedData();
            
            // Показываем экран выбора языка
            showScreen('language');
            
            // Настройка обработчиков событий
            setupEventListeners();
            
            // Показываем футер (теперь он всегда виден)
            document.querySelector('.global-footer').classList.remove('hidden');
            
            // Применяем переводы
            applyTranslation();
        }

        // Создание частиц
        function createParticles() {
            const container = document.getElementById('particles-3d');
            if (!container) return;
            
            container.innerHTML = '';
            
            for (let i = 0; i < 60; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const startX = Math.random() * 100;
                const startY = Math.random() * 100;
                const delay = Math.random() * 20;
                const size = 3 + Math.random() * 5;
                
                particle.style.left = startX + 'vw';
                particle.style.top = startY + 'vh';
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.animationDelay = delay + 's';
                
                container.appendChild(particle);
            }
        }

        // Загрузка сохраненных данных
        function loadSavedData() {
            const savedLang = localStorage.getItem('twin_lang');
            if (savedLang && (savedLang === 'ru' || savedLang === 'en')) {
                currentLang = savedLang;
            }
            
            const savedUserId = localStorage.getItem('twin_user_id');
            if (savedUserId && isValidUserId(savedUserId)) {
                appState.userId = savedUserId;
                appState.isAuthenticated = true;
                appState.signalCount = parseInt(localStorage.getItem('twin_signal_count') || '0');
            }
            
            const savedUsername = localStorage.getItem('twin_username');
            if (savedUsername) {
                appState.username = savedUsername;
            }
        }

        // Выбор языка
        function selectLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('twin_lang', lang);
            
            // Обновляем имя пользователя в зависимости от языка
            appState.username = lang === 'ru' ? 'Гость' : 'Guest';
            localStorage.setItem('twin_username', appState.username);
            
            applyTranslation();
            showScreen('instruction');
        }

        // Применение перевода
        function applyTranslation() {
            const t = translations[currentLang];
            
            if (!t) return;
            
            // Обновляем все текстовые элементы по ID
            const textElements = [
                { id: 'language-subtitle', text: t.selectLanguage },
                { id: 'instruction-title', text: t.important },
                { id: 'instruction-subtitle', text: t.mandatory },
                { id: 'short-instruction', text: t.shortInstruction },
                { id: 'expand-text', text: t.expand },
                { id: 'acknowledge-text', text: t.acknowledge },
                { id: 'warning-message', text: t.warning },
                { id: 'link-text', text: t.linkBtn },
                { id: 'copy-text', text: t.copy },
                { id: 'registered-text', text: t.registered },
                { id: 'continue-text', text: t.continue },
                { id: 'auth-title', text: t.authTitle },
                { id: 'auth-subtitle', text: t.authSubtitle },
                { id: 'access-restricted', text: t.accessRestricted },
                { id: 'signals-only', text: t.signalsOnly },
                { id: 'step1-title', text: t.step1Title },
                { id: 'step1-text', text: t.step1Text },
                { id: 'go-to-1win', text: t.goTo1win },
                { id: 'step2-title', text: t.step2Title },
                { id: 'step2-text', text: t.step2Text },
                { id: 'promo-warning', text: t.promoWarning },
                { id: 'step3-title', text: t.step3Title },
                { id: 'step3-text', text: t.step3Text },
                { id: 'id-hint', text: t.idHint },
                { id: 'error-text', text: t.errorText },
                { id: 'enter-system', text: t.enterSystem },
                { id: 'security-text', text: t.securityText },
                { id: 'main-title', text: t.mainTitle },
                { id: 'select-game', text: t.selectGame },
                { id: 'accuracy-text', text: t.accuracyText },
                { id: 'game-mines', text: t.gameMines },
                { id: 'mines-desc', text: t.minesDesc },
                { id: 'mines-acc', text: t.minesAcc },
                { id: 'mines-fast', text: t.minesFast },
                { id: 'hot-text', text: t.hotText },
                { id: 'game-penalty', text: t.gamePenalty },
                { id: 'penalty-desc', text: t.penaltyDesc },
                { id: 'penalty-acc', text: t.penaltyAcc },
                { id: 'penalty-zones', text: t.penaltyZones },
                { id: 'top-text', text: t.topText },
                { id: 'game-coinflip', text: t.gameCoinflip },
                { id: 'coinflip-desc', text: t.coinflipDesc },
                { id: 'coinflip-acc', text: t.coinflipAcc },
                { id: 'coinflip-classic', text: t.coinflipClassic },
                { id: 'game-tower', text: t.gameTower },
                { id: 'tower-desc', text: t.towerDesc },
                { id: 'tower-acc', text: t.towerAcc },
                { id: 'tower-floors', text: t.towerFloors },
                { id: 'nav-games', text: t.navGames },
                { id: 'nav-profile', text: t.navProfile },
                { id: 'nav-guide', text: t.navGuide },
                { id: 'profile-title', text: t.profileTitle },
                { id: 'profile-subtitle', text: t.profileSubtitle },
                { id: 'account-id-label', text: t.accountIdLabel },
                { id: 'your-stats', text: t.yourStats },
                { id: 'signals-made', text: t.signalsMade },
                { id: 'change-id-text', text: t.changeIdText },
                { id: 'nav-games2', text: t.navGames2 },
                { id: 'nav-profile2', text: t.navProfile2 },
                { id: 'nav-guide2', text: t.navGuide2 },
                { id: 'guide-title', text: t.guideTitle },
                { id: 'official-link-text', text: t.officialLinkText },
                { id: 'copy-link-text', text: t.copyLinkText },
                { id: 'mandatory-promo', text: t.mandatoryPromo },
                { id: 'copy-promo-text', text: t.copyPromoText },
                { id: 'back-menu-text', text: t.backMenuText },
                { id: 'nav-games3', text: t.navGames3 },
                { id: 'nav-profile3', text: t.navProfile3 },
                { id: 'nav-guide3', text: t.navGuide3 },
                { id: 'attention-text', text: t.attentionText },
                { id: 'warning-modal-text', html: t.warningModalText },
                { id: 'confirm-promo-text', text: t.confirmPromoText },
                { id: 'cancel-text', text: t.cancelText },
                { id: 'footer-title', text: t.footerTitle }
            ];
            
            textElements.forEach(item => {
                const element = document.getElementById(item.id);
                if (element) {
                    if (item.html) {
                        element.innerHTML = item.html;
                    } else {
                        element.textContent = item.text;
                    }
                }
            });
            
            // Обновляем текст в кнопках выбора языка
            document.querySelectorAll('.language-btn').forEach(btn => {
                if (btn.dataset.lang === 'ru') {
                    btn.querySelector('.btn-icon').textContent = '🇷🇺';
                    btn.querySelector('.btn-icon').nextSibling.textContent = 'Русский';
                } else {
                    btn.querySelector('.btn-icon').textContent = '🇺🇸';
                    btn.querySelector('.btn-icon').nextSibling.textContent = 'English';
                }
            });
            
            // Обновляем имя пользователя
            appState.username = currentLang === 'ru' ? 'Гость' : 'Guest';
            updateProfileDisplay();
            
            // Полный текст инструкции
            const fullInstruction = document.getElementById('full-instruction-text');
            if (fullInstruction) {
                fullInstruction.innerHTML = t.instructionText;
            }
            
            const instructionFullText = document.getElementById('instruction-full-text');
            if (instructionFullText) {
                instructionFullText.innerHTML = t.instructionFullText;
            }
        }

        // Переключение экранов
        function showScreen(screenName) {
            // Скрываем все экраны
            Object.values(screens).forEach(screen => {
                if (screen && screen.classList) {
                    screen.classList.add('hidden');
                }
            });
            
            // Скрываем игровой контейнер
            if (screens.gameContainer) {
                screens.gameContainer.innerHTML = '';
                screens.gameContainer.classList.add('hidden');
            }
            
            // Скрываем модальное окно предупреждения
            if (screens.gameWarningModal) {
                screens.gameWarningModal.classList.add('hidden');
            }
            
            // Скрываем основной контейнер экранов
            if (screens.screens) {
                screens.screens.classList.add('hidden');
            }
            
            // Показываем нужный экран
            switch(screenName) {
                case 'language':
                    if (screens.language) screens.language.classList.remove('hidden');
                    break;
                case 'instruction':
                    if (screens.instruction) {
                        screens.instruction.classList.remove('hidden');
                        applyTranslation();
                    }
                    break;
                case 'auth':
                    if (screens.screens) screens.screens.classList.remove('hidden');
                    if (screens.auth) screens.auth.classList.remove('hidden');
                    applyTranslation();
                    break;
                case 'main':
                    if (screens.screens) screens.screens.classList.remove('hidden');
                    if (screens.main) screens.main.classList.remove('hidden');
                    updateNav('main');
                    applyTranslation();
                    break;
                case 'profile':
                    if (screens.screens) screens.screens.classList.remove('hidden');
                    if (screens.profile) screens.profile.classList.remove('hidden');
                    updateProfileDisplay();
                    updateNav('profile');
                    applyTranslation();
                    break;
                case 'instruction-menu':
                    if (screens.screens) screens.screens.classList.remove('hidden');
                    if (screens.instructionMenu) screens.instructionMenu.classList.remove('hidden');
                    updateNav('instruction-menu');
                    applyTranslation();
                    break;
                case 'game':
                    // Игры открываются в отдельном контейнере
                    if (screens.gameContainer) {
                        screens.gameContainer.classList.remove('hidden');
                    }
                    break;
            }
        }

        // Обновление навигации
        function updateNav(activeItem) {
            document.querySelectorAll('.nav-item-3d').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.screen === activeItem) {
                    item.classList.add('active');
                }
            });
        }

        // Обновление профиля
        function updateProfileDisplay() {
            const usernameEl = document.getElementById('username');
            const displayIdEl = document.getElementById('display-id');
            const signalCountEl = document.getElementById('signal-count');
            
            if (usernameEl) usernameEl.textContent = appState.username;
            if (displayIdEl) displayIdEl.textContent = appState.userId || '00000000';
            if (signalCountEl) signalCountEl.textContent = appState.signalCount;
            
            localStorage.setItem('twin_user_id', appState.userId || '');
            localStorage.setItem('twin_signal_count', appState.signalCount.toString());
            localStorage.setItem('twin_username', appState.username);
        }

        // Валидация ID
        function isValidUserId(id) {
            return /^\d{5,13}$/.test(id);
        }

        // Увеличение счетчика сигналов
        function incrementSignalCount() {
            appState.signalCount += 1;
            updateProfileDisplay();
            showNotification(currentLang === 'ru' ? '✅ Сигнал получен!' : '✅ Signal received!');
        }

        // Показать уведомление
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 40px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, #00A8FF 0%, #0066CC 100%);
                color: white;
                padding: 20px 35px;
                border-radius: 20px;
                z-index: 3000;
                box-shadow: 0 20px 50px rgba(0,0,0,0.5);
                animation: slideDown 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                font-weight: 800;
                font-size: 18px;
                border: 3px solid rgba(255,255,255,0.25);
                backdrop-filter: blur(15px);
                max-width: 90%;
                text-align: center;
                letter-spacing: 0.5px;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }

        // Копирование в буфер обмена
        function copyToClipboard(text) {
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text).then(() => {
                    showNotification(currentLang === 'ru' ? '📋 Скопировано!' : '📋 Copied!');
                }).catch(() => {
                    fallbackCopy(text);
                });
            } else {
                fallbackCopy(text);
            }
        }

        // Резервное копирование
        function fallbackCopy(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showNotification(currentLang === 'ru' ? '📋 Скопировано!' : '📋 Copied!');
            } catch (err) {
                showNotification(currentLang === 'ru' ? '❌ Ошибка копирования' : '❌ Copy error');
            }
            
            document.body.removeChild(textArea);
        }

        // Проверка кнопки "Продолжить"
        function checkContinueButton() {
            const continueBtn = document.getElementById('continue-btn');
            if (!continueBtn) return;
            
            if (appState.acknowledged && appState.registered) {
                continueBtn.classList.remove('disabled');
                continueBtn.disabled = false;
            } else {
                continueBtn.classList.add('disabled');
                continueBtn.disabled = true;
            }
        }

        // Настройка обработчиков событий
        function setupEventListeners() {
            // Выбор языка
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const lang = this.dataset.lang;
                    selectLanguage(lang);
                });
            });

            // Кнопка развернуть/свернуть
            const expandBtn = document.getElementById('expand-btn');
            if (expandBtn) {
                expandBtn.addEventListener('click', function() {
                    const fullText = document.getElementById('full-instruction-text');
                    const actionButtons = document.getElementById('action-buttons');
                    const expandText = document.getElementById('expand-text');
                    
                    if (fullText && fullText.classList.contains('hidden')) {
                        fullText.classList.remove('hidden');
                        if (actionButtons) actionButtons.classList.remove('hidden');
                        expandText.textContent = translations[currentLang].collapse;
                        this.classList.add('primary');
                    } else {
                        if (fullText) fullText.classList.add('hidden');
                        expandText.textContent = translations[currentLang].expand;
                        this.classList.remove('primary');
                    }
                });
            }

            // Кнопка "Я ознакомился"
            const acknowledgeBtn = document.getElementById('acknowledge-btn');
            if (acknowledgeBtn) {
                acknowledgeBtn.addEventListener('click', function() {
                    if (this.classList.contains('btn-disabled')) {
                        appState.acknowledged = true;
                        this.classList.remove('btn-disabled');
                        this.classList.add('primary');
                    } else if (this.classList.contains('primary')) {
                        appState.acknowledged = false;
                        this.classList.remove('primary');
                        this.classList.add('btn-disabled');
                    }
                    checkContinueButton();
                });
            }

            // Кнопка "Я зарегистрировался"
            const registeredBtn = document.getElementById('registered-btn');
            if (registeredBtn) {
                registeredBtn.addEventListener('click', function() {
                    if (this.classList.contains('btn-disabled')) {
                        appState.registered = true;
                        this.classList.remove('btn-disabled');
                        this.classList.add('primary');
                    } else if (this.classList.contains('primary')) {
                        appState.registered = false;
                        this.classList.remove('primary');
                        this.classList.add('btn-disabled');
                    }
                    checkContinueButton();
                });
            }

            // Кнопка "Ссылка на 1WIN"
            const registerLinkBtn = document.getElementById('register-link-btn');
            if (registerLinkBtn) {
                registerLinkBtn.addEventListener('click', function() {
                    if (tg) {
                        tg.openLink('https://lknt.pro/2d77a7');
                    } else {
                        window.open('https://lknt.pro/2d77a7', '_blank');
                    }
                });
            }

            // Кнопка "Продолжить"
            const continueBtn = document.getElementById('continue-btn');
            if (continueBtn) {
                continueBtn.addEventListener('click', function() {
                    if (appState.acknowledged && appState.registered) {
                        if (appState.isAuthenticated) {
                            showScreen('main');
                        } else {
                            showScreen('auth');
                        }
                    }
                });
            }

            // Копирование промокода
            document.querySelectorAll('[data-text]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const text = this.dataset.text;
                    copyToClipboard(text);
                });
            });

            // Игровые карточки
            document.querySelectorAll('.game-card-3d').forEach(card => {
                card.addEventListener('click', function() {
                    const game = this.dataset.game;
                    appState.currentGame = game;
                    if (screens.gameWarningModal) {
                        screens.gameWarningModal.classList.remove('hidden');
                    }
                });
            });

            // Предупреждение перед игрой
            const confirmPromoBtn = document.getElementById('confirm-promo-entered');
            if (confirmPromoBtn) {
                confirmPromoBtn.addEventListener('click', function() {
                    if (screens.gameWarningModal) {
                        screens.gameWarningModal.classList.add('hidden');
                    }
                    loadGame(appState.currentGame);
                });
            }

            const cancelGameBtn = document.getElementById('cancel-game');
            if (cancelGameBtn) {
                cancelGameBtn.addEventListener('click', function() {
                    if (screens.gameWarningModal) {
                        screens.gameWarningModal.classList.add('hidden');
                    }
                    showScreen('main');
                });
            }

            // Кнопка "Перейти в 1WIN"
            const goTo1WinBtn = document.getElementById('go-to-twin');
            if (goTo1WinBtn) {
                goTo1WinBtn.addEventListener('click', function() {
                    if (tg) {
                        tg.openLink('https://lknt.pro/2d77a7');
                    } else {
                        window.open('https://lknt.pro/2d77a7', '_blank');
                    }
                });
            }

            // Ввод ID
            const userIdInput = document.getElementById('user-id');
            if (userIdInput) {
                userIdInput.addEventListener('input', function(e) {
                    const value = e.target.value.replace(/\D/g, '');
                    e.target.value = value;
                    
                    if (value.length >= 5 && value.length <= 13) {
                        e.target.style.borderColor = '#00ff88';
                        document.getElementById('error-message')?.classList.add('hidden');
                    } else {
                        e.target.style.borderColor = '#3a3a5a';
                    }
                });
            }

            // Очистка ID
            const clearIdBtn = document.getElementById('clear-id');
            if (clearIdBtn) {
                clearIdBtn.addEventListener('click', function() {
                    const userIdInput = document.getElementById('user-id');
                    if (userIdInput) {
                        userIdInput.value = '';
                        userIdInput.style.borderColor = '#3a3a5a';
                    }
                });
            }

            // Кнопка входа
            const loginBtn = document.getElementById('login-btn');
            if (loginBtn) {
                loginBtn.addEventListener('click', function() {
                    const userIdInput = document.getElementById('user-id');
                    if (!userIdInput) return;
                    
                    const userId = userIdInput.value.trim();
                    
                    if (!isValidUserId(userId)) {
                        const errorMsg = document.getElementById('error-message');
                        if (errorMsg) errorMsg.classList.remove('hidden');
                        userIdInput.style.borderColor = '#ff3366';
                        return;
                    }
                    
                    appState.userId = userId;
                    appState.isAuthenticated = true;
                    appState.signalCount = 0;
                    
                    const errorMsg = document.getElementById('error-message');
                    if (errorMsg) errorMsg.classList.add('hidden');
                    userIdInput.style.borderColor = '#00ff88';
                    
                    updateProfileDisplay();
                    showScreen('main');
                    showNotification(currentLang === 'ru' ? '✅ Успешный вход!' : '✅ Login successful!');
                });
            }

            // Кнопка "Изменить ID"
            const changeIdBtn = document.getElementById('change-id-btn');
            if (changeIdBtn) {
                changeIdBtn.addEventListener('click', function() {
                    showScreen('auth');
                });
            }

            // Кнопка "Копировать ссылку" в инструкции
            const copyInstructionLink = document.getElementById('copy-instruction-link');
            if (copyInstructionLink) {
                copyInstructionLink.addEventListener('click', function() {
                    copyToClipboard('https://lknt.pro/2d77a7');
                });
            }

            // Кнопка "Копировать промокод" в инструкции
            const copyInstructionPromo = document.getElementById('copy-instruction-promo');
            if (copyInstructionPromo) {
                copyInstructionPromo.addEventListener('click', function() {
                    copyToClipboard('Pill2CB');
                });
            }

            // Кнопка "Назад" из инструкции
            const backFromInstruction = document.getElementById('back-from-instruction');
            if (backFromInstruction) {
                backFromInstruction.addEventListener('click', function() {
                    showScreen('main');
                });
            }

            // Навигация по меню
            document.querySelectorAll('.nav-item-3d').forEach(item => {
                item.addEventListener('click', function() {
                    const screen = this.dataset.screen;
                    if (screen === 'game') {
                        // Обработка игр теперь через модальное окно
                        return;
                    }
                    showScreen(screen);
                });
            });
        }

        // Загрузка игры как отдельной страницы
        function loadGame(gameName) {
            if (!screens.gameContainer) return;
            
            screens.gameContainer.innerHTML = '';
            screens.gameContainer.classList.remove('hidden');
            screens.screens.classList.add('hidden'); // Скрываем основной интерфейс
            
            const t = translations[currentLang];
            
            switch(gameName) {
                case 'mines':
                    loadMinesGame(t);
                    break;
                case 'penalty':
                    loadPenaltyGame(t);
                    break;
                case 'coinflip':
                    loadCoinFlipGame(t);
                    break;
                case 'tower':
                    loadTowerGame(t);
                    break;
            }
        }

        // Игра "Мины"
        function loadMinesGame(t) {
            const gameHTML = `
                <div class="game-screen-3d">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; padding-bottom: 25px; border-bottom: 3px solid rgba(0, 168, 255, 0.4);">
                        <button class="btn-3d" id="back-to-main" style="width: 65px; height: 65px; padding: 0; font-size: 32px; background: rgba(0, 168, 255, 0.2); border-color: rgba(0, 168, 255, 0.5); border-radius: 20px; box-shadow: 0 10px 25px rgba(0, 168, 255, 0.3);">←</button>
                        <h1 style="color: #00A8FF; font-size: 32px; font-weight: 900; text-transform: uppercase; letter-spacing: 3px; text-shadow: 0 0 25px rgba(0, 168, 255, 0.5);" class="gradient-text">💣 ${t.gameMines}</h1>
                        <div style="width: 65px;"></div>
                    </div>
                    
                    <div style="padding: 0 20px 120px;">
                        <div class="card-3d" style="margin-bottom: 30px;">
                            <h3 style="color: white; margin-bottom: 20px; font-size: 22px;">${t.selectMines}</h3>
                            <div style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center;">
                                <button class="btn-3d mine-option" data-mines="1" style="width: auto; flex: 1; min-width: 120px; padding: 20px; font-size: 18px;">${t.oneMine}</button>
                                <button class="btn-3d mine-option" data-mines="3" style="width: auto; flex: 1; min-width: 120px; padding: 20px; font-size: 18px;">${t.threeMines}</button>
                                <button class="btn-3d mine-option" data-mines="5" style="width: auto; flex: 1; min-width: 120px; padding: 20px; font-size: 18px;">${t.fiveMines}</button>
                                <button class="btn-3d mine-option" data-mines="7" style="width: auto; flex: 1; min-width: 120px; padding: 20px; font-size: 18px;">${t.sevenMines}</button>
                            </div>
                        </div>
                        
                        <div class="mines-grid-3d" id="mines-grid">
                            ${Array(25).fill().map((_, i) => 
                                `<div class="mine-cell-3d" data-cell="${i}"></div>`
                            ).join('')}
                        </div>
                        
                        <div class="card-3d" style="margin: 35px 0; padding: 30px; text-align: center; border-color: rgba(0, 168, 255, 0.5);" id="mines-status">
                            <div style="font-size: 24px; color: #00A8FF; font-weight: 800; letter-spacing: 1px;">${t.signalReceived}</div>
                        </div>
                        
                        <button class="btn-3d primary" id="get-mines-signal" style="margin-bottom: 20px; padding: 22px; font-size: 20px;">
                            <span style="font-size: 24px;">✨</span>
                            ${t.getSignal}
                        </button>
                        
                        <button class="btn-3d" id="back-to-main-btn" style="padding: 22px; font-size: 18px;">
                            ← ${t.toMenu}
                        </button>
                    </div>
                </div>
            `;
            
            screens.gameContainer.innerHTML = gameHTML;
            
            let selectedMines = 1;
            let isProcessing = false;
            
            document.getElementById('back-to-main').addEventListener('click', () => {
                screens.gameContainer.classList.add('hidden');
                screens.screens.classList.remove('hidden');
                showScreen('main');
            });
            
            document.getElementById('back-to-main-btn').addEventListener('click', () => {
                screens.gameContainer.classList.add('hidden');
                screens.screens.classList.remove('hidden');
                showScreen('main');
            });
            
            document.querySelectorAll('.mine-option').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.mine-option').forEach(b => b.classList.remove('primary'));
                    btn.classList.add('primary');
                    selectedMines = parseInt(this.dataset.mines);
                    clearMinesGrid();
                    document.getElementById('mines-status').innerHTML = `<div style="font-size: 24px; color: #00A8FF; font-weight: 800; letter-spacing: 1px;">${t.signalReceived}</div>`;
                });
            });
            
            document.querySelector('.mine-option').classList.add('primary');
            
            document.getElementById('get-mines-signal').addEventListener('click', async function() {
                if (isProcessing) return;
                
                isProcessing = true;
                const btn = this;
                const status = document.getElementById('mines-status');
                
                btn.disabled = true;
                btn.innerHTML = `<span style="font-size: 24px;">⏳</span> ${t.generating}`;
                status.innerHTML = `<div style="font-size: 24px; color: #FF3366; font-weight: 800; animation: pulse 1s infinite; letter-spacing: 1px;">${t.waiting}</div>`;
                
                clearMinesGrid();
                const starsCount = getStarsCount(selectedMines);
                const starPositions = generateStarPositions(starsCount, 25);
                
                starPositions.forEach((pos, index) => {
                    setTimeout(() => {
                        const cell = document.querySelector(`.mine-cell-3d[data-cell="${pos}"]`);
                        cell.classList.add('has-star');
                        cell.innerHTML = '<div class="star-3d">⭐</div>';
                    }, index * 200);
                });
                
                status.innerHTML = `<div style="font-size: 24px; color: #00FF88; font-weight: 800; text-shadow: 0 0 20px rgba(0, 255, 136, 0.5); letter-spacing: 1px;">${t.signalReady} (${starsCount} ${currentLang === 'ru' ? 'звёзд' : 'stars'})</div>`;
                
                btn.disabled = false;
                btn.innerHTML = `<span style="font-size: 24px;">✨</span> ${t.getSignal}`;
                isProcessing = false;
                
                incrementSignalCount();
            });
            
            function clearMinesGrid() {
                document.querySelectorAll('.mine-cell-3d').forEach(cell => {
                    cell.classList.remove('has-star');
                    cell.innerHTML = '';
                });
            }
            
            function getStarsCount(mines) {
                const maxStars = { 1: 6, 3: 4, 5: 3, 7: 2 };
                return Math.floor(Math.random() * maxStars[mines]) + 1;
            }
            
            function generateStarPositions(count, totalCells) {
                const positions = new Set();
                while (positions.size < count) {
                    positions.add(Math.floor(Math.random() * totalCells));
                }
                return Array.from(positions);
            }
        }

        // Игра "Пенальти"
        function loadPenaltyGame(t) {
            const gameHTML = `
                <div class="game-screen-3d">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; padding-bottom: 25px; border-bottom: 3px solid rgba(0, 168, 255, 0.4);">
                        <button class="btn-3d" id="back-to-main" style="width: 65px; height: 65px; padding: 0; font-size: 32px; background: rgba(0, 168, 255, 0.2); border-color: rgba(0, 168, 255, 0.5); border-radius: 20px; box-shadow: 0 10px 25px rgba(0, 168, 255, 0.3);">←</button>
                        <h1 style="color: #00A8FF; font-size: 32px; font-weight: 900; text-transform: uppercase; letter-spacing: 3px; text-shadow: 0 0 25px rgba(0, 168, 255, 0.5);" class="gradient-text">⚽ ${t.gamePenalty}</h1>
                        <div style="width: 65px;"></div>
                    </div>
                    
                    <div style="padding: 0 20px 120px;">
                        <div class="card-3d" style="margin-bottom: 30px; text-align: center;">
                            <h3 style="color: white; margin-bottom: 20px; font-size: 22px;">${t.selectZone}</h3>
                        </div>
                        
                        <div class="goal-area-3d">
                            <div class="goal-grid-3d" id="goal-grid">
                                ${Array(15).fill().map((_, i) => 
                                    `<div class="goal-cell-3d" data-cell="${i}"></div>`
                                ).join('')}
                            </div>
                        </div>
                        
                        <div class="card-3d" style="margin: 35px 0; padding: 30px; text-align: center; border-color: rgba(0, 168, 255, 0.5);" id="penalty-status">
                            <div style="font-size: 24px; color: #00A8FF; font-weight: 800; display: flex; align-items: center; justify-content: center; gap: 20px; letter-spacing: 1px;">
                                <span style="font-size: 32px;">⚽</span>
                                <span>${t.signalReceived}</span>
                            </div>
                        </div>
                        
                        <button class="btn-3d primary" id="get-penalty-signal" style="margin-bottom: 20px; padding: 22px; font-size: 20px;">
                            <span style="font-size: 28px;">🎯</span>
                            ${t.getSignal}
                        </button>
                        
                        <button class="btn-3d" id="back-to-main-btn" style="padding: 22px; font-size: 18px;">
                            ← ${t.toMenu}
                        </button>
                    </div>
                </div>
            `;
            
            screens.gameContainer.innerHTML = gameHTML;
            
            let isProcessing = false;
            
            document.getElementById('back-to-main').addEventListener('click', () => {
                screens.gameContainer.classList.add('hidden');
                screens.screens.classList.remove('hidden');
                showScreen('main');
            });
            
            document.getElementById('back-to-main-btn').addEventListener('click', () => {
                screens.gameContainer.classList.add('hidden');
                screens.screens.classList.remove('hidden');
                showScreen('main');
            });
            
            document.getElementById('get-penalty-signal').addEventListener('click', async function() {
                if (isProcessing) return;
                
                isProcessing = true;
                const btn = this;
                const status = document.getElementById('penalty-status');
                
                btn.disabled = true;
                btn.innerHTML = `<span style="font-size: 28px;">⏳</span> <span>${t.generating}</span>`;
                status.innerHTML = `<div style="font-size: 24px; color: #FF3366; font-weight: 800; animation: pulse 1s infinite; display: flex; align-items: center; justify-content: center; gap: 20px; letter-spacing: 1px;">
                    <span style="font-size: 32px;">⚽</span>
                    <span>${t.determiningZone}</span>
                </div>`;
                
                document.querySelectorAll('.goal-cell-3d').forEach(cell => {
                    cell.classList.remove('target');
                    cell.innerHTML = '';
                });
                
                await new Promise(resolve => setTimeout(resolve, 3000));
                
                const targetCell = Math.floor(Math.random() * 15);
                const cells = document.querySelectorAll('.goal-cell-3d');
                const targetElement = cells[targetCell];
                targetElement.classList.add('target');
                
                const indicator = document.createElement('div');
                indicator.style.cssText = 'position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 42px; color: #FFD700; animation: spin 1s infinite; filter: drop-shadow(0 0 20px #FFD700);';
                indicator.innerHTML = '🎯';
                targetElement.appendChild(indicator);
                
                status.innerHTML = `<div style="font-size: 24px; color: #00FF88; font-weight: 800; display: flex; align-items: center; justify-content: center; gap: 20px; text-shadow: 0 0 20px rgba(0, 255, 136, 0.5); letter-spacing: 1px;">
                    <span style="font-size: 32px;">✅</span>
                    <span>${t.zoneSelected} ${targetCell + 1}</span>
                </div>`;
                
                btn.disabled = false;
                btn.innerHTML = `<span style="font-size: 28px;">🎯</span> ${t.getSignal}`;
                isProcessing = false;
                
                incrementSignalCount();
            });
        }

        // Игра "Орел и Решка"
        function loadCoinFlipGame(t) {
            const gameHTML = `
                <div class="game-screen-3d">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; padding-bottom: 25px; border-bottom: 3px solid rgba(0, 168, 255, 0.4);">
                        <button class="btn-3d" id="back-to-main" style="width: 65px; height: 65px; padding: 0; font-size: 32px; background: rgba(0, 168, 255, 0.2); border-color: rgba(0, 168, 255, 0.5); border-radius: 20px; box-shadow: 0 10px 25px rgba(0, 168, 255, 0.3);">←</button>
                        <h1 style="color: #00A8FF; font-size: 32px; font-weight: 900; text-transform: uppercase; letter-spacing: 3px; text-shadow: 0 0 25px rgba(0, 168, 255, 0.5);" class="gradient-text">🪙 ${t.gameCoinflip}</h1>
                        <div style="width: 65px;"></div>
                    </div>
                    
                    <div style="padding: 0 20px 120px;">
                        <div class="coin-container-3d">
                            <div class="coin-3d-model" id="coin-3d">
                                <div class="coin-front-3d-model">${currentLang === 'ru' ? 'ОРЁЛ' : 'HEADS'}</div>
                                <div class="coin-back-3d-model">${currentLang === 'ru' ? 'РЕШКА' : 'TAILS'}</div>
                            </div>
                        </div>
                        
                        <div class="card-3d" style="margin: 35px 0; padding: 30px; text-align: center; border-color: rgba(0, 168, 255, 0.5);" id="coin-status">
                            <div style="font-size: 24px; color: #00A8FF; font-weight: 800; letter-spacing: 1px;">${t.signalReceived}</div>
                        </div>
                        
                        <button class="btn-3d primary" id="get-coin-signal" style="margin-bottom: 20px; padding: 22px; font-size: 20px;">
                            <span style="font-size: 24px;">🎰</span>
                            ${t.getSignal}
                        </button>
                        
                        <button class="btn-3d" id="back-to-main-btn" style="padding: 22px; font-size: 18px;">
                            ← ${t.toMenu}
                        </button>
                    </div>
                </div>
            `;
            
            screens.gameContainer.innerHTML = gameHTML;
            
            let isProcessing = false;
            
            document.getElementById('back-to-main').addEventListener('click', () => {
                screens.gameContainer.classList.add('hidden');
                screens.screens.classList.remove('hidden');
                showScreen('main');
            });
            
            document.getElementById('back-to-main-btn').addEventListener('click', () => {
                screens.gameContainer.classList.add('hidden');
                screens.screens.classList.remove('hidden');
                showScreen('main');
            });
            
            document.getElementById('get-coin-signal').addEventListener('click', async function() {
                if (isProcessing) return;
                
                isProcessing = true;
                const btn = this;
                const status = document.getElementById('coin-status');
                const coin = document.getElementById('coin-3d');
                
                btn.disabled = true;
                btn.innerHTML = `<span style="font-size: 24px;">🌀</span> ${t.throwing}`;
                status.innerHTML = `<div style="font-size: 24px; color: #FF3366; font-weight: 800; animation: pulse 1s infinite; letter-spacing: 1px;">${t.coinFlip}</div>`;
                
                coin.classList.add('flipping');
                
                await new Promise(resolve => setTimeout(resolve, 2500));
                
                const isHeads = Math.random() > 0.5;
                coin.classList.remove('flipping');
                
                if (isHeads) {
                    coin.style.transform = 'rotateY(0deg)';
                    status.innerHTML = `<div style="font-size: 24px; color: #00FF88; font-weight: 800; text-shadow: 0 0 20px rgba(0, 255, 136, 0.5); letter-spacing: 1px;">${t.heads}</div>`;
                } else {
                    coin.style.transform = 'rotateY(180deg)';
                    status.innerHTML = `<div style="font-size: 24px; color: #00FF88; font-weight: 800; text-shadow: 0 0 20px rgba(0, 255, 136, 0.5); letter-spacing: 1px;">${t.tails}</div>`;
                }
                
                btn.disabled = false;
                btn.innerHTML = `<span style="font-size: 24px;">🎰</span> ${t.getSignal}`;
                isProcessing = false;
                
                incrementSignalCount();
            });
        }

        // Игра "Tower Rush" с РАБОТАЮЩЕЙ анимацией строительства этажей
        function loadTowerGame(t) {
            const gameHTML = `
                <div class="game-screen-3d">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; padding-bottom: 25px; border-bottom: 3px solid rgba(0, 168, 255, 0.4);">
                        <button class="btn-3d" id="back-to-main" style="width: 65px; height: 65px; padding: 0; font-size: 32px; background: rgba(0, 168, 255, 0.2); border-color: rgba(0, 168, 255, 0.5); border-radius: 20px; box-shadow: 0 10px 25px rgba(0, 168, 255, 0.3);">←</button>
                        <h1 style="color: #00A8FF; font-size: 32px; font-weight: 900; text-transform: uppercase; letter-spacing: 3px; text-shadow: 0 0 25px rgba(0, 168, 255, 0.5);" class="gradient-text">🏗️ ${t.gameTower}</h1>
                        <div style="width: 65px;"></div>
                    </div>
                    
                    <div style="padding: 0 20px 120px;">
                        <div class="card-3d" style="margin-bottom: 30px; text-align: center;">
                            <div style="font-size: 24px; color: #00A8FF; font-weight: 800; letter-spacing: 1px; margin-bottom: 30px;">${t.signalReceived}</div>
                        </div>
                        
                        <div class="tower-container-3d" id="tower-container">
                            <div class="tower-base-3d"></div>
                            <div class="tower-floors-3d" id="tower-floors"></div>
                        </div>
                        
                        <div class="card-3d" style="margin: 35px 0; padding: 30px; text-align: center; border-color: rgba(0, 168, 255, 0.5);" id="tower-status">
                            <div style="font-size: 24px; color: #00A8FF; font-weight: 800; letter-spacing: 1px;">${t.signalReceived}</div>
                        </div>
                        
                        <button class="btn-3d primary" id="get-tower-signal" style="margin-bottom: 20px; padding: 22px; font-size: 20px;">
                            <span style="font-size: 28px;">🏗️</span>
                            ${t.getSignal}
                        </button>
                        
                        <button class="btn-3d" id="back-to-main-btn" style="padding: 22px; font-size: 18px;">
                            ← ${t.toMenu}
                        </button>
                    </div>
                </div>
            `;
            
            screens.gameContainer.innerHTML = gameHTML;
            
            let isProcessing = false;
            
            document.getElementById('back-to-main').addEventListener('click', () => {
                screens.gameContainer.classList.add('hidden');
                screens.screens.classList.remove('hidden');
                showScreen('main');
            });
            
            document.getElementById('back-to-main-btn').addEventListener('click', () => {
                screens.gameContainer.classList.add('hidden');
                screens.screens.classList.remove('hidden');
                showScreen('main');
            });
            
            document.getElementById('get-tower-signal').addEventListener('click', async function() {
                if (isProcessing) return;
                
                isProcessing = true;
                const btn = this;
                const status = document.getElementById('tower-status');
                const towerFloors = document.getElementById('tower-floors');
                
                btn.disabled = true;
                btn.innerHTML = `<span style="font-size: 28px;">⏳</span> <span>${t.building}</span>`;
                status.innerHTML = `<div style="font-size: 24px; color: #FF3366; font-weight: 800; animation: pulse 1s infinite; letter-spacing: 1px;">${t.buildingTower}</div>`;
                
                towerFloors.innerHTML = '';
                
                const numberOfFloors = Math.floor(Math.random() * 13) + 3; // 3-15 этажей
                
                for (let i = 0; i < numberOfFloors; i++) {
                    const floor = document.createElement('div');
                    floor.className = 'tower-floor-3d';
                    floor.textContent = '✅';
                    floor.style.fontSize = '24px';
                    floor.style.animation = `floorBuild3D 1s cubic-bezier(0.4, 0, 0.2, 1) ${i * 0.3}s forwards`;
                    floor.style.opacity = '0';
                    floor.style.transform = 'scaleY(0) translateY(70px) rotateX(-90deg)';
                    towerFloors.appendChild(floor);
                }
                
                await new Promise(resolve => setTimeout(resolve, numberOfFloors * 300 + 1000));
                
                status.innerHTML = `<div style="font-size: 24px; color: #00FF88; font-weight: 800; text-shadow: 0 0 20px rgba(0, 255, 136, 0.5); letter-spacing: 1px;">${t.safeFloors}: ${numberOfFloors}</div>`;
                
                btn.disabled = false;
                btn.innerHTML = `<span style="font-size: 28px;">🏗️</span> ${t.getSignal}`;
                isProcessing = false;
                
                incrementSignalCount();
            });
        }

        // Инициализация приложения
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>